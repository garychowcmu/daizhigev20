九章算术 汉 张苍

　　昔在庖犠氏始画八卦，以通神明之德，以类万物之情，作九九之数，以合六爻之变。暨于黄帝神而化之，引而伸之，于是建历纪，协律吕，用稽道原，然后两仪四象精微之气可得而效焉。记称隶首作数，其详未之闻也。按周公制礼而有九数，九数之流，则《九章》是矣。往者暴秦焚书，经术散坏。自时厥后，汉北平侯张苍、大司农中丞耿寿昌皆以善算命世。苍等因旧文之遗残，各称删补。故校其目则与古或异，而所论者多近语也。徽幼习《九章》，长再详览。观阴阳之割裂，总算术之根源，探赜之暇，遂悟其意。是以敢竭顽鲁，采其所见，为之作注。事类相推，各有攸归，故枝条虽分而同本榦知，发其一端而已。又所析理以辞，解体用图，庶亦约而能周，通而不黩，览之者思过半矣。且算在六艺，古者以宾兴贤能，教习国子；虽曰九数，其能穷纤入微，探测无方；至于以法相传，亦犹规矩度量可得而共，非特难为也。当今好之者寡，故世虽多通才达学，而未必能综于此耳。《周官大司徒》职，夏至日中立八尺之表。其景尺有五寸，谓之地中。说云，南戴日下万五千里。夫云尔者，以术推之。案：《九章》立四表望远及因木望山之术，皆端旁互见，无有超邈若斯之类。然则苍等为术犹未足以博尽群数也。徽寻九数有重差之名，原其指趣乃所以施于此也。凡望极高、测绝深而兼知其远者必用重差、句股，则必以重差为率，故曰重差也。立两表于洛阳之城，令高八尺，南北各尽平地。同日度其正中之时。以景差为法，表高乘表间为实，实如法而一。所得加表高，即日去地也。以南表之景乘表间为实，实如法而一，即为从南表至南戴日下也。以南戴日下及日去地为句、股，为之求弦，即日去人也。以径寸之筒南望日，日满筒空，则定筒之长短以为股率，以筒径为句率，日去人之数为大股，大股之句即日径也。虽夫圆穹之象犹曰可度，又况泰山之高与江海之广哉。徽以为今之史籍且略举天地之物，考论厥数，载之于志，以阐世术之美，辄造《重差》，并为注解，以究古人之意，缀于句股之下。度高者重表，测深者累矩，孤离者三望，离而又旁求者四望。触类而长之，则虽幽遐诡伏，靡所不入，博物君子，详而览焉。

　　卷一

　　○方田（以御田畴界域）

　　今有田广十五步，从十六步。问为田几何？答曰：一亩。

　　又有田广十二步，从十四步。问为田几何？答曰：一百六十八步。

　　〔图：从十四，广十二。〕

　　方田术曰：广从步数相乘得积步。

　　〔此积谓田幂。凡广从相乘谓之幂。

　　淳风等按：经云广从相乘得积步，注云广从相乘谓之幂。观斯注意，积幂义同。以理推之，固当不尔。何则？幂是方面单布之名，积乃众数聚居之称。循名责实，二者全殊。虽欲同之，窃恐不可。今以凡言幂者据广从之一方；其言积者举众步之都数。经云相乘得积步，即是都数之明文。注云谓之为幂，全乖积步之本意。此注前云积为田幂，于理得通。复云谓之为幂，繁而不当。今者注释，存善去非，略为料简，遗诸后学。〕

　　以亩法二百四十步除之，即亩数。百亩为一顷。

　　〔淳风等按：此为篇端，故特举顷、亩二法。余术不复言者，从此可知。一亩之田，广十五步，从而疏之，令为十五行，则每行广一步而从十六步。又横而截之，令为十六行，则每行广一步而从十五步。此即从疏横截之步，各自为方，凡有二百四十步。一亩之地，步数正同。以此言之，则广从相乘得积步，验矣。

　　二百四十步者，亩法也；百亩者，顷法也。故以除之，即得。〕

　　今有田广一里，从一里。问为田几何？答曰：三顷七十五亩。

　　又有田广二里，从三里。问为田几何？答曰：二十二顷五十亩。

　　里田术曰：广从里数相乘得积里。以三百七十五乘之，即亩数。

　　〔按：此术广从里数相乘得积里。方里之中有三顷七十五亩，故以乘之，即得亩数也。〕

　　今有十八分之十二，问约之得几何？答曰：三分之二。

　　又有九十一分之四十九，问约之得几何？答曰：十三分之七。

　　○约分

　　〔按：约分者，物之数量，不可悉全，必以分言之；分之为数，繁则难用。

　　设有四分之二者，繁而言之，亦可为八分之四；约而言之，则二分之一也，虽则异辞，至于为数，亦同归尔。法实相推，动有参差，故为术者先治诸分。〕

　　术曰：可半者半之；不可半者，副置分母、子之数，以少减多，更相减损，求其等也。以等数约之。

　　〔等数约之，即除也。其所以相减者，皆等数之重叠，故以等数约之。〕

　　今有三分之一，五分之二，问合之得几何？答曰：十五分之十一。

　　又有三分之二，七分之四，九分之五，问合之得几何？答曰：得一、六十三分之五十。

　　又有二分之一，三分之二，四分之三，五分之四，问合之得几何？答曰：得二、六十分之四十三。

　　○合分

　　〔淳风等按：合分知，数非一端，分无定准，诸分子杂互，群母参差。粗细既殊，理难从一，故齐其众分，同其群母，令可相并，故曰合分。〕

　　术曰：母互乘子，并以为实。母相乘为法。

　　〔母互乘子。约而言之者，其分粗；繁而言之者，其分细。虽则粗细有殊，然其实一也。众分错杂，非细不会。乘而散之，所以通之。通之则可并也。凡母互乘子谓之齐，群母相乘谓之同。同者，相与通同，共一母也；齐者，子与母齐，势不可失本数也。方以类聚，物以群分。数同类者无远；数异类者无近。远而通体知，虽异位而相从也；近而殊形知，虽同列而相违也。然则齐同之术要矣：错综度数，动之斯谐，其犹佩觿解结，无往而不理焉。乘以散之，约以聚之，齐同以通之，此其算之纲纪乎？其一术者，可令母除为率，率乘子为齐。〕

　　实如法而一。不满法者，以法命之。

　　〔今欲求其实，故齐其子，又同其母，令如母而一。其余以等数约之，即得知，所谓同法为母，实余为子，皆从此例。〕

　　其母同者，直相从之。

　　今有九分之八，减其五分之一，问余几何？答曰：四十五分之三十一。

　　又有四分之三，减其三分之一，问余几何？答曰：十二分之五。

　　○减分

　　〔淳风等按：诸分子、母数各不同，以少减多，欲知余几，减余为实，故曰减分。〕

　　术曰：母互乘子，以少减多，余为实。母相乘为法。实如法而一。

　　〔母互乘子知，以齐其子也。以少减多知，齐故可相减也。母相乘为法者，同其母也。母同子齐，故如母而一，即得。〕

　　今有八分之五，二十五分之十六，问孰多？多几何？答曰：二十五分之十六多，多二百分之三。

　　又有九分之八，七分之六，问孰多？多几何？答曰：九分之八多，多六十三分之二。

　　又有二十一分之八，五十分之十七，问孰多？多几何？答曰：二十一分之八多，多一千五十分之四十三。

　　○课分

　　〔淳风等按：分各异名，理不齐一，较其相近之数，故曰课分也。〕

　　术曰：母互乘子，以少减多，余为实。母相乘为法。实如法而一，即相多也。

　　〔淳风等按：此术母互乘子，以少分减多分，与减分义同；惟相多之数，意与减分有异：减分知，求其余数有几；课分知，以其余数相多也。〕

　　今有三分之一，三分之二，四分之三。问减多益少，各几何而平？答曰：减四分之三者二，三分之二者一，并，以益三分之一，而各平于十二分之七。

　　又有二分之一，三分之二，四分之三。问减多益少，各几何而平？答曰：减三分之二者一，四分之三者四、并，以益二分之一，而各平于三十六分之二十三。

　　○平分

　　〔淳风等按：平分知，诸分参差，欲令齐等，减彼之多，增此之少，故曰平分也。〕

　　术曰：母互乘子，〔齐其子也。〕

　　副并为平实。

　　〔淳风等按：母互乘子，副并为平实知，定此平实主限，众子所当损益知，限为平。〕

　　母相乘为法。

　　〔母相乘为法知，亦齐其子，又同其母。〕

　　以列数乘未并者各自为列实。亦以列数乘法。

　　〔此当副置列数除平实，若然则重有分，故反以列数乘同齐。

　　淳风等按：问云所平之分多少不定，或三或二，列位无常。平三知，置位三重；平二知，置位二重。凡此之例，一准平分不可豫定多少，故直云列数而已。〕

　　以平实减列实，余，约之为所减。并所减以益于少。以法命平实，各得其平。

　　今有七人，分八钱三分钱之一。问人得几何？答曰：人得一钱二十一分钱之四。

　　又有三人三分人之一，分六钱三分钱之一、四分钱之三。问人得几何？答曰：人得二钱八分钱之一。

　　○经分

　　〔淳风等按：经分者，自合分已下，皆与诸分相齐，此乃直求一人之分。以人数分所分，故曰经分也。〕

　　术曰：以人数为法，钱数为实，实如法而一。有分者通之。

　　〔母互乘子知，齐其子；母相乘者，同其母。以母通之者，分母乘全内子。

　　乘，散全则为积分，积分则与子相通，故可令相从。凡数相与者谓之率。率知，自相与通。有分则可散，分重叠则约也；等除法实，相与率也。故散分者，必令两分母相乘法实也。〕

　　重有分者同而通之。

　　〔又以法分母乘实，实分母乘法。此谓法、实俱有分，故令分母各乘全分内子，又令分母互乘上下。〕

　　今有田广七分步之四，从五分步之三，问为田几何？答曰：三十五分步之十二。

　　又有田广九分步之七，从十一分步之九，问为田几何？答曰：十一分步之七。

　　又有田广五分步之四，从九分步之五，问为田几何？答曰：九分步之四。

　　○乘分

　　〔淳风等按：乘分者，分母相乘为法，子相乘为实，故曰乘分。〕

　　术曰：母相乘为法，子相乘为实，实如法而一。

　　〔凡实不满法者而有母、子之名。若有分，以乘其实而长之，则亦满法，乃为全耳。又以子有所乘，故母当报除。报除者，实如法而一也。今子相乘则母各当报除，因令分母相乘而连除也。此田有广从，难以广谕。设有问者曰：马二十匹，直金十二斤。今卖马二十匹，三十五人分之，人得几何？答曰：三十五分斤之十二。其为之也，当如经分术，以十二斤金为实，三十五人为法。设更言马五匹，直金三斤。今卖马四匹，七人分之，人得几何？答曰：人得三十五分斤之十二。其为之也，当齐其金、人之数，皆合初问入于经分矣。然则分子相乘为实者，犹齐其金也；母相乘为法者，犹齐其人也。同其母为二十，马无事于同，但欲求齐而已。又，马五匹，直金三斤，完全之率；分而言之，则为一匹直金五分斤之三。七人卖四马，一人卖七分马之四。金与人交互相生。所从言之异，而计数则三术同归也。〕

　　今有田广三步三分步之一，从五步五分步之二，问为田几何？答曰：十八步。

　　又有田广七步四分步之三，从十五步九分步之五，问为田几何？答曰：一百二十步九分步之五。

　　又有田广十八步七分步之五，从二十三步十一分步之六，问为田几何？答曰：一亩二百步十一分步之七。

　　○大广田

　　〔淳风等按：大广田知，初术直有全步而无余分；次术空有余分而无全步；此术先见全步，复有余分，可以广兼三术，故曰大广。〕

　　术曰：分母各乘其全，分子从之，〔分母各乘其全，分子从之者，通全步内分子。如此则母、子皆为实矣。〕

　　相乘为实。分母相乘为法。

　　〔犹乘分也。〕

　　实如法而一。

　　〔今为术广从俱有分，当各自通其分。命母入者，还须出之，故令分母相乘为法而连除之。〕

　　今有圭田广十二步，正从二十一步，问为田几何？答曰：一百二十六步。

　　又有圭田广五步二分步之一，从八步三分步之二，问为田几何？答曰：二十三步六分步之五。

　　术曰：半广以乘正从。

　　〔半广知，以盈补虚为直田也。亦可半正从以乘广。按：半广乘从，以取中平之数，故广从相乘为积步。亩法除之，即得也。〕

　　今有邪田，一头广三十步，一头广四十二步，正从六十四步。问为田几何？答曰：九亩一百四十四步。

　　又有邪田，正广六十五步，一畔从一百步，一畔从七十二步。问为田几何？答曰：二十三亩七十步。

　　术曰：并两斜而半之，以乘正从若广。又可半正从若广，以乘并。亩法而一。

　　〔并而半之者，以盈补虚也。〕

　　今有箕田，舌广二十步，踵广五步，正从三十步，问为田几何？答曰：一亩一百三十五步。

　　又有箕田，舌广一百一十七步，踵广五十步，正从一百三十五步，问为田几何？答曰：四十六亩二百三十二步半。

　　术曰：并踵、舌而半之，以乘正从。亩法而一。

　　〔中分箕田则为两邪田，故其术相似。又可并踵、舌，半正从，以乘之。〕

　　今有圆田，周三十步，径十步。

　　〔淳风等按：术意以周三径一为率，周三十步，合径十步。今依密率，合径九步十一分步之六。〕

　　问为田几何？答曰：七十五步。

　　〔此于徽术，当为田七十一步一百五十七分步之一百三。

　　淳风等按：依密率，为田七十一步二十三分步之一十三。〕

　　又有圆田，周一百八十一步，径六十步三分步之一。

　　〔淳风等按：周三径一，周一百八十一步，径六十步三分步之一。依密率，径五十七步二十二分步之一十三。〕

　　问为田几何？答曰：十一亩九十步十二分步之一。

　　〔此于徽术，当为田十亩二百八步三百一十四分步之一百十三。

　　淳风等按：依密率，当为田十亩二百五步八十八分步之八十七。〕

　　术曰：半周半径相乘得积步。

　　〔按：半周为从，半径为广，故广从相乘为积步也。假令圆径二尺，圆中容六觚之一面，与圆径之半，其数均等。合径率一而外周率三也。

　　又按：为图，以六觚之一面乘一弧半径，三之，得十二觚之幂。若又割之，次以十二觚之一面乘一弧之半径，六之，则得二十四觚之幂。割之弥细，所失弥少。割之又割，以至于不可割，则与圆周合体而无所失矣。觚面之外，又有余径。

　　以面乘余径，则幂出觚表。若夫觚之细者，与圆合体，则表无余径。表无余径，则幂不外出矣。以一面乘半径，觚而裁之，每辄自倍。故以半周乘半径而为圆幂。

　　此一周、径，谓至然之数，非周三径一之率也。周三者，从其六觚之环耳。以推圆规多少之觉，乃弓之与弦也。然世传此法，莫肯精核；学者踵古，习其谬失。

　　不有明据，辩之斯难。凡物类形象，不圆则方。方圆之率，诚著于近，则虽远可知也。由此言之，其用博矣。谨按图验，更造密率。恐空设法，数昧而难譬，故置诸检括，谨详其记注焉。

　　割六觚以为十二觚术曰：置圆径二尺，半之为一尺，即圆里觚之面也。令半径一尺为弦，半面五寸为句，为之求股。以句幂二十五寸减弦幂，余七十五寸，开方除之，下至秒、忽。又一退法，求其微数。微数无名知以为分子，以十为分母，约作五分忽之二。故得股八寸六分六厘二秒五忽五分忽之二。以减半径，余一寸三分三厘九毫七秒四忽五分忽之三，谓之小句。觚之半面又谓之小股。为之求弦。其幂二千六百七十九亿四千九百一十九万三千四百四十五忽，余分弃之。

　　开方除之，即十二觚之一面也。

　　割十二觚以为二十四觚术曰：亦令半径为弦，半面为句，为之求股。置上小弦幂，四而一，得六百六十九亿八千七百二十九万八千三百六十一忽，余分弃之，即句幂也。以减弦幂，其余开方除之，得股九寸六分五厘九毫二秒五忽五分忽之四。以减半径，余三分四厘七秒四忽五分忽之一，谓之小句。觚之半面又谓之小股。为之求小弦。其幂六百八十一亿四千八百三十四万九千四百六十六忽，余分弃之。开方除之，即二十四觚之一面也。

　　割二十四觚以为四十八觚术曰：亦令半径为弦，半面为句，为之求股。置上小弦幕，四而一，得一百七十亿三千七百八万七千三百六十六忽，余分弃之，即句幂也。以减弦幂，其余，开方除之，得股九寸九分一厘四毫四秒四忽五分忽之四。以减半径，余八厘五毫五秒五忽五分忽之一，谓之小句。觚之半面又谓之小股。为之求小弦。其幂一百七十一亿一千二十七万八千八百一十三忽，余分弃之。

　　开方除之，得小弦一寸三分八毫六忽，余分弃之，即四十八觚之一面。以半径一尺乘之，又以二十四乘之，得幂三万一千三百九十三亿四千四百万忽。以百亿除之，得幂三百一十三寸六百二十五分寸之五百八十四，即九十六觚之幂也。

　　割四十八觚以为九十六觚术曰：亦令半径为弦，半面为句，为之求股。置次上弦幂，四而一，得四十二亿七千七百五十六万九千七百三忽，余分弃之，即句幂也。以减弦幂，其余，开方除之，得股九寸九分七厘八毫五秒八忽十分忽之九。

　　以减半径，余二厘一毫四秒一忽十分忽之一，谓之小句。觚之半面又谓之小股。

　　为之求小弦。其幂四十二亿八千二百一十五万四千一十二忽，余分弃之。开方除之，得小弦六分五厘四毫三秒八忽，余分弃之，即九十六觚之一面。以半径一尺乘之，又以四十八乘之，得幂三万一千四百一十亿二千四百万忽，以百亿除之，得幂三百一十四寸六百二十五分寸之六十四，即一百九十二觚之幂也。以九十六觚之幂减之，余六百二十五分寸之一百五，谓之差幂。倍之，为分寸之二百一十，即九十六觚之外弧田九十六所，谓以弦乘矢之凡幂也。加此幂于九十六觚之幂，得三百一十四寸六百二十五分寸之一百六十九，则出圆之表矣。故还就一百九十二觚之全幂三百一十四寸以为圆幂之定率而弃其余分。以半径一尺除圆幂，倍之，得六尺二寸八分，即周数。令径自乘为方幂四百寸，与圆幂相折，圆幂得一百五十七为率，方幂得二百为率。方幂二百其中容圆幂一百五十七也。圆率犹为微少。

　　案：弧田图令方中容圆，圆中容方，内方合外方之半。然则圆幂一百五十七，其中容方幂一百也。又令径二尺与周六尺二寸八分相约，周得一百五十七，径得五十，则其相与之率也。周率犹为微少也。晋武库中汉时王莽作铜斛，其铭曰：律嘉量斛，内方尺而圆其外，庣旁九厘五毫，幂一百六十二寸，深一尺，积一千六百二十寸，容十斗。以此术求之，得幂一百六十一寸有奇，其数相近矣。此术微少。而觚差幂六百二十五分寸之一百五。以一百九十二觚之幂为率消息，当取此分寸之三十六，以增于一百九十二觚之幂，以为圆幂，三百一十四寸二十五分寸之四。置径自乘之方幂四百寸，令与圆幂通相约，圆幂三千九百二十七，方幂得五千，是为率。方幂五千中容圆幂三千九百二十七；圆幂三千九百二十七中容方幂二千五百也。以半径一尺除圆幂三百一十四寸二十五分寸之四，倍之，得六尺二寸八分二十五分分之八，即周数也。全径二尺与周数通相约，径得一千二百五十，周得三千九百二十七，即其相与之率。若此者，盖尽其纤微矣。举而用之，上法仍约耳。当求一千五百三十六觚之一面，得三千七十二觚之幂，而裁其微分，数亦宜然，重其验耳。

　　淳风等案：旧术求圆，皆以周三径一为率。若用之求圆周之数，则周少径多。

　　用之求其六觚之田，乃与此率合会耳。何则？假令六觚之田，觚间各一尺为面，自然从角至角，其径二尺可知。此则周六径二与周三径一已合。恐此犹为难晓，今更引物为喻。设令刻物作圭形者六枚，枚别三面，皆长一尺。攒此六物，悉使锐头向里，则成六觚之周，角径亦皆一尺。更从觚角外畔，围绕为规，则六觚之径尽达规矣。当面径短，不至外规。若以径言之，则为规六尺，径二尺，面径皆一尺。面径股不至外畔，定无二尺可知。故周三径一之率于圆周乃是径多周少。

　　径一周三，理非精密。盖术从简要，举大纲，略而言之。刘徽特以为疏，遂改张其率。但周、径相乘，数难契合。徽虽出斯二法，终不能究其纤毫也。祖冲之以其不精，就中更推其数。今者修撰，捃摭诸家，考其是非，冲之为密。故显之于徽术之下，冀学者知所裁焉。〕

　　又术曰：周、径相乘，四而一。

　　〔此周与上觚同耳。周、径相乘，各当一半。而今周、径两全，故两母相乘为四，以报除之。于徽术，以五十乘周，一百五十七而一，即径也。以一百五十七乘径，五十而一，即周也。新术径率犹当微少。据周以求径，则失之长；据径以求周，则失之短。诸据见径以求幂者，皆失之于微少；据周以求幂者，皆失之于微多。

　　淳风等按：依密率，以七乘周，二十二而一，即径；以二十二乘径，七而一，即周。依术求之，即得。〕

　　又术曰：径自相乘，三之，四而一。

　　〔按：圆径自乘为外方，三之，四而一者，是为圆居外方四分之三也。若令六觚之一面乘半径，其幂即外方四分之一也。因而三之，即亦居外方四分之三也。

　　是为圆里十二觚之幂耳。取以为圆，失之于微少。于徽新术，当径自乘，又以一百五十七乘之，二百而一。

　　淳风等按：密率，令径自乘，以十一乘之，十四而一，即圆幂也。〕

　　又术曰：周自相乘，十二而一。

　　〔六觚之周，其于圆径，三与一也。故六觚之周自相乘为幂，若圆径自乘者九方。九方凡为十二觚者十有二，故曰十二而一，即十二觚之幂也。今此令周自乘，非但若为圆径自乘者九方而已。然则十二而一，所得又非十二觚之幂也。若欲以为圆幂，失之于多矣。以六觚之周，十二而一可也。于徽新术，直令圆周自乘，又以二十五乘之，三百一十四而一，得圆幂。其率：二十五者，周幂也；三百一十四者，周自乘之幂也。置周数六尺二寸八分，令自乘，得幂三十九万四千三百八十四分。又置圆幂三万一千四百分。皆以一千二百五十六约之，得此率。

　　淳风等按：方面自乘即得其积。圆周求其幂，假率乃通。但此术所求用三、一为率。圆田正法，半周及半径以相乘。今乃用全周自乘，故须以十二为母。何者？据全周而求半周，则须以二为法。就全周而求半径，复假六以除之。是二、六相乘，除周自乘之数。依密率，以七乘之，八十八而一。〕

　　今有宛田，下周三十步，径十六步。问为田几何？答曰：一百二十步。

　　又有宛田，下周九十九步，径五十一步。问为田几何？答曰：五亩六十二步四分步之一。

　　术曰：以径乘周，四而一。

　　〔此术不验，故推方锥以见其形。假令方锥下方六尺，高四尺。四尺为股，下方之半三尺为句。正面邪为弦，弦五尺也。令句弦相乘，四因之，得六十尺，即方锥四面见者之幂。若令其中容圆锥，圆锥见幂与方锥见幂，其率犹方幂之与圆幂也。按：方锥下六尺，则方周二十四尺。以五尺乘而半之，则亦锥之见幂。

　　故求圆锥之数，折径以乘下周之半，即圆锥之幂也。今宛田上径圆穹，而与圆锥同术，则幂失之于少矣。然其术难用，故略举大较，施之大广田也。求圆锥之幂，犹求圆田之幂也。今用两全相乘，故以四为法，除之，亦如圆田矣。开立圆术说圆方诸率甚备，可以验此。〕

　　今有弧田，弦二十步，矢十五步。问为田几何？答曰：一亩九十七步半。

　　又有弧田，弦七十八步二分步之一，矢十三步九分步之七。问为田几何？答曰：二亩一百五十五步八十一分步之五十六。

　　术曰：以弦乘矢，矢又自乘，并之，二而一。

　　〔方中之圆，圆里十二觚之幂，合外方之幂四分之三也。中方合外方之半，则朱青合外方四分之一也。弧田，半圆之幂也。故依半圆之体而为之术。以弦乘矢而半之，则为黄幂，矢自乘而半之，则为二青幂。青、黄相连为弧体，弧体法当应规。今觚面不至外畔，失之于少矣。圆田旧术以周三径一为率，俱得十二觚之幂，亦失之于少也，与此相似。指验半圆之幂耳。若不满半圆者，益复疏阔。

　　宜句股锯圆材之术，以弧弦为锯道长，以矢为锯深，而求其径。既知圆径，则弧可割分也。割之者，半弧田之弦以为股，其矢为句，为之求弦，即小弧之弦也。

　　以半小弧之弦为句，半圆径为弦，为之求股。以减半径，其余即小弦之矢也。割之又割，使至极细。但举弦、矢相乘之数，则必近密率矣。然于算数差繁，必欲有所寻究也。若但度田，取其大数，旧术为约耳。〕

　　今有环田，中周九十二步，外周一百二十二步，径五步。

　　〔此欲令与周三径一之率相应，故言径五步也。据中、外周，以徽术言之，当径四步一百五十七分步之一百二十二也。

　　淳风等按：依密率，合径四步二十二分步之十七。〕

　　问为田几何？答曰：二亩五十五步。

　　〔于徽术，当为田二亩三十一步一百五十七分步之二十三。

　　淳风等按：依密率，为田二亩三十步二十二分步之十五。〕

　　术曰：并中、外周而半之，以径乘之，为积步。

　　〔此田截而中之周则为长。并而半之知，亦以盈补虚也。此可令中、外周各自为圆田，以中圆减外圆，余则环实也。〕

　　又有环田，中周六十二步四分步之三，外周一百一十三步二分步之一，径十二步三分步之二。

　　〔此田环而不通匝，故径十二步三分步之二。若据上周求径者，此径失之于多，过周三径一之率，盖为疏矣。于徽术，当径八步六百二十八分步之五十一。

　　淳风等按：依周三径一考之，合径八步二十四分步之一十一。依密率，合径八步一百七十六分步之一十三。〕

　　问为田几何？答曰：四亩一百五十六步四分步之一。

　　〔于徽术，当为田二亩二百三十二步五千二十四分步之七百八十七也。依周三径一，为田三亩二十五步六十四分步之二十五。

　　淳风等按：密率，为田二亩二百三十一步一千四百八分步之七百一十七也。〕

　　术曰：置中、外周步数，分母子各居其下。母互乘子，通全步内分子。以中周减外周，余半之，以益中周。径亦通分内子，以乘周为实。分母相乘为法。除之为积步。余，积步之分。以亩法除之，即亩数也。

　　〔按：此术，并中、外周步数于上，分母子于下，母互乘子者，为中外周俱有余分，故以互乘齐其子，母相乘同其母。子齐母同，故通全步，内分子。半之知，以盈补虚，得中平之周。周则为从，径则为广，故广从相乘而得其积。既合分母，还须分母出之。故令周、径分母相乘而连除之，即得积步。不尽，以等数除之而命分。以亩法除积步，得亩数也。〕

　　卷二

　　○粟米（以御交质变易）

　　粟米之法〔凡此诸率相与大通，其时相求，各如本率。可约者约之。别术然也。〕

　　粟率五十大抃五十四稻六十粝米三十粝饭七十五豉六十三粺米二十七粺饭五十四飧九十米二十四饭四十八熟菽一百三半御米二十一御饭四十二糵一百七十五小<麦啇>十三半菽荅麻麦各四十五今有〔此都术也。凡九数以为篇名，可以广施诸率。所谓告往而知来，举一隅而三隅反者也。诚能分诡数之纷杂，通彼此之否塞，因物成率，审辨名分，平其偏颇，齐其参差，则终无不归于此术也。〕

　　术曰：以所有数乘所求率为实。以所有率为法。

　　〔少者多之始，一者数之母，故为率者必等之于一。据粟率五、粝率三，是粟五而为一，粝米三而为一也。欲化粟为米者，粟当先本是一。一者，谓以五约之，令五而为一也。讫，乃以三乘之，令一而为三。如是，则率至于一，以五为三矣。然先除后乘，或有余分，故术反之。又完言之知，粟五升为粝米三升；以分言之知，粟一斗为粝米五分斗之三，以五为母，三为子。以粟求粝米者，以子乘，其母报除也。然则所求之率常为母也。

　　淳风等按：“宜云所求之率常为子，所有之率常为母。”今乃云“所求之率常为母”知，脱错也。〕

　　实如法而一。

　　今有粟一斗，欲为粝米。问得几何？答曰：为粝米六升。

　　术曰：以粟求粝米，三之，五而一。

　　〔淳风等按：都术：以所求率乘所有数，以所有率为法。此术以粟求米，故粟为所有数。三是米率，故三为所求率。五为粟率，故五为所有率。粟率五十，米率三十，退位求之，故惟云三、五也。〕

　　今有粟二斗一升，欲为粺米。问得几何？答曰：为粺米一斗一升五十分升之十七。

　　术曰：以粟求粺米，二十七之，五十而一。

　　〔淳风等按：粺米之率二十有七，故直以二十七之，五十而一也。〕

　　今有粟四斗五升，欲为米。问得几何？答曰：为米二斗一升五分升之三。

　　术曰：以粟求米，十二之，二十五而一。

　　〔淳风等按：米之率二十有四，以为率太繁，故因而半之。半所求之率，以乘所有之数。所求之率既减半，所有之率亦减半。是故十二乘之，二十五而一也。〕

　　今有粟七斗九升，欲为御米。问得几何？答曰：为御米三斗三升五十分升之九。

　　术曰：以粟求御米，二十一之，五十而一。

　　今有粟一斗，欲为小<麦啇>。问得几何？答曰：为小<麦啇>二升一十分升之七。

　　术曰：以粟求小<麦啇>，二十七之，百而一。

　　〔淳风等按：小<麦啇>之率十三有半。半者二为母，以二通之，得二十七，为所求率。又以母二通其粟率，得一百，为所有率。凡本率有分者，须即乘除也。

　　他皆仿此。〕

　　今有粟九斗八升，欲为大<麦啇>。问得几何？答曰：为大<麦啇>一十斗五升二十五分升之二十一。

　　术曰：以粟求大<麦啇>，二十七之，二十五而一。

　　〔淳风等按：大<麦啇>之率五十有四。因其可半，故二十七之，亦如粟求米，半其二率。〕

　　今有粟二斗三升，欲为粝饭。问得几何？答曰：为粝饭三斗四升半。

　　术曰：以粟求粝饭，三之，二而一。

　　〔淳风等按：粝饭之率七十有五，粟求粝饭，合以此数乘之。今以等数二十有五约其二率，所求之率得三，所有之率得二，故以三乘二除。〕

　　今有粟三斗六升，欲为粺饭。问得几何？答曰：为粺饭三斗八升二十五分升之二十二。

　　术曰：以粟求粺饭，二十七之，二十五而一。

　　〔淳风等按：此术与大<麦啇>多同。〕

　　今有粟八斗六升，欲为饭。问得几何？答曰：为饭八斗二升二十五分升之一十四。

　　术曰：以粟求饭，二十四之，二十五而一。

　　〔淳风等按：<麦啇>饭率四十八。此亦半二率而乘除。〕

　　今有粟九斗八升，欲为御饭。问得几何？答曰：为御饭八斗二升二十五分升之八。

　　术曰：以粟求御饭，二十一之，二十五而一。

　　〔淳风等按：此术半率，亦与饭多同。〕

　　今有粟三斗少半升，欲为菽。问得几何？答曰：为菽二斗七升一十分升之三。

　　今有粟四斗一升太半升，欲为荅。问得几何？答曰：为荅三斗七升半。

　　今有粟五斗太半升，欲为麻。问得几何？答曰：为麻四斗五升五分升之三。

　　今有粟一十斗八升五分升之二，欲为麦。问得几何？答曰：为麦九斗七升二十五分升之一十四。

　　术曰：以粟求菽、荅、麻、麦，皆九之，十而一。

　　〔淳风等按：四术率并四十五，皆是为粟所求，俱合以此率乘其本粟。术欲从省，先以等数五约之，所求之率得九，所有之率得十，故九乘十除，义由于此。〕

　　今有粟七斗五升七分升之四，欲为稻。问得几何？答曰：为稻九斗三十五分升之二十四。

　　术曰：以粟求稻，六之，五而一。

　　〔淳风等按：稻率六十，亦约二率而乘除。〕

　　今有粟七斗八升，欲为豉。问得几何？答曰：为豉九斗八升二十五分升之七。

　　术曰：以粟求豉，六十三之，五十而一。

　　今有粟五斗五升，欲为飧。问得几何？答曰：为飧九斗九升。

　　术曰：以粟求飧，九之，五而一。

　　〔淳风等按：飧率九十，退位，与求稻多同。〕

　　今有粟四斗，欲为熟菽。问得几何？答曰：为熟菽八斗二升五分升之四。

　　术曰：以粟求熟菽，二百七之，百而一。

　　〔淳风等按：熟菽之率一百三半。半者，其母二，故以母二通之。所求之率既被二乘，所有之率随而俱长，故以二百七之，百而一。〕

　　今有粟二斗，欲为糵。问得几何？答曰：为糵七斗。

　　术曰：以粟求糵，七之，二而一。

　　〔淳风等按：糵率一百七十有五，合以此数乘其本粟。术欲从省，先以等数二十五约之，所求之率得七，所有之率得二，故七乘二除。〕

　　今有粝米十五斗五升五分升之二，欲为粟。问得几何？答曰：为粟二十五斗九升。

　　术曰：以粝米求粟，五之，三而一。

　　〔淳风等按：上术以粟求米，故粟为所有数，三为所求率，五为所有率。今此以米求粟，故米为所有数，五为所求率，三为所有率。准都术求之，各合其数。

　　以下所有反求多同，皆准此。〕

　　今有粺米二斗，欲为粟。问得几何？答曰：为粟三斗七升二十七分升之一。

　　术曰：以粺米求粟，五十之，二十七而一。

　　今有米三斗少半升，欲为粟。问得几何？答曰：为粟六斗三升三十六分升之七。

　　术曰：以米求粟，二十五之，十二而一。

　　今有御米十四斗，欲为粟。问得几何？答曰：为粟三十三斗三升少半升。

　　术曰：以御米求粟，五十之，二十一而一。

　　今有稻一十二斗六升一十五分升之一十四，欲为粟。问得几何？答曰：为粟一十斗五升九分升之七。

　　术曰：以稻求粟，五之，六而一。

　　今有粝米一十九斗二升七分升之一，欲为粺米。问得几何？答曰：为粺米一十七斗二升一十四分升之一十三。

　　术曰：以粝米求粺米，九之，十而一。

　　〔淳风等按：粺米率二十七，合以此数乘粝米。术欲从省，先以等数三约之，所求之率得九，所有之率得十，故九乘而十除。〕

　　今有粝米六斗四升五分升之三，欲为粝饭。问得几何？答曰：为粝饭一十六斗一升半。

　　术曰：以粝米求粝饭，五之，二而一。

　　〔淳风等按：粝饭之率七十有五，宜以本粝米乘此率数。术欲从省，先以等数十五约之，所求之率得五，所有之率得二，故五乘二除，义由于此。〕

　　今有粝饭七斗六升七分升之四，欲为飧。问得几何？答曰：为飧九斗一升三十五分升之三十一。

　　术曰：以粝饭求飧，六之，五而一。

　　〔淳风等按：飧率九十，为粝饭所求，宜以粝饭乘此率。术欲从省，先以等数十五约之，所求之率得六，所有之率得五。以此，故六乘五除也。〕

　　今有菽一斗，欲为熟菽。问得几何？答曰：为熟菽二斗三升。

　　术曰：以菽求熟菽，二十三之，十而一。

　　〔淳风等按：熟菽之率一百三半。因其有半，各以母二通之，宜以菽数乘此率。术欲从省，先以等数九约之，所求之率得一十一半，所有之率得五也。〕

　　今有菽二斗，欲为豉。问得几何？答曰：为豉二斗八升。

　　术曰：以菽求豉，七之，五而一。

　　〔淳风等按：豉率六十三，为菽所求，宜以菽乘此率。术欲从省，先以等数九约之，所求之率得七，而所有之率得五也。〕

　　今有麦八斗六升七分升之三，欲为小<麦啇>。问得几何？答曰：为小<麦啇>二斗五升一十四分升之一十三。

　　术曰：以麦求小<麦啇>，三之，十而一。

　　〔淳风等按：小<麦啇>之率十三半，宜以母二通之，以乘本麦之数。术欲从省，先以等数九约之，所求之率得三，所有之率得十也。〕

　　今有麦一斗，欲为大<麦啇>。问得几何？答曰：为大抃一斗二升。

　　术曰：以麦求大<麦啇>，六之，五而一。

　　〔淳风等按：大<麦啇>之率五十有四，合以麦数乘此率。术欲从省，先以等数九约之，所求之率得六，所有之率得五也。〕

　　今有出钱一百六十，买瓴甓十八枚。

　　〔瓴甓，砖也。〕

　　问枚几何？答曰：一枚八钱九分钱之八。

　　今有出钱一万三千五百，买竹二千三百五十个。问个几何？答曰：一个，五钱四十七分钱之三十五。

　　经率术曰：以所买率为法，所出钱数为实，实如法得一。

　　〔此术犹经分。

　　淳风等按：今有之义，以所求率乘所有数，合以瓴甓一枚乘钱一百六十为实。

　　但以一乘不长，故不复乘，是以径将所买之率与所出之钱为法、实也。又按：此今有之义。出钱为所有数，一枚为所求率，所买为所有率，而今有之，即得所求数。一乘不长，故不复乘，是以径将所买之率为法，以所出之钱为实，实如法得一枚钱。不尽者，等数而命分。〕

　　今有出钱五千七百八十五，买漆一斛六斗七升太半升。欲斗率之，问斗几何？答曰：一斗，三百四十五钱五百三分钱之一十五。

　　今有出钱七百二十，买缣一匹二丈一尺。欲丈率之，问丈几何？答曰：一丈，一百一十八钱六十一分钱之二。

　　今有出钱二千三百七十，买布九匹二丈七尺。欲匹率之，问匹几何？答曰：一匹，二百四十四钱一百二十九分钱之一百二十四。

　　今有出钱一万三千六百七十，买丝一石二钧一十七斤。欲石率之，问石几何？答曰：一石，八千三百二十六钱一百九十七分钱之百七十八。

　　术曰：以求所率乘钱数为实，以所买率为法，实如法得一。

　　〔淳风等按：今有之义，钱为所求率，物为所有数，故以乘钱，又以分母乘之为实。实如法而一，有分者通之。所买通分内子为所有率，故以为法。得钱数不尽而命分者，因法为母，实余为子。实见不满，故以命之。〕

　　今有出钱五百七十六，买竹七十八个。欲其大小率之，问各几何？答曰：其四十八个，个七钱；其三十个，个八钱。

　　今有出钱一千一百二十，买丝一石二钧十八斤。欲其贵贱斤率之，问各几何？答曰：其二钧八斤，斤五钱；其一石一十斤，斤六钱。

　　今有出钱一万三千九百七十，买丝一石二钧二十八斤三两五铢。欲其贵贱石率之，问各几何？答曰：其一钧九两一十二铢，石八千五十一钱；其一石一钧二十七斤九两一十七铢，石八千五十二钱。

　　今有出钱一万三千九百七十，买丝一石二钧二十八斤三两五铢。欲其贵贱钧率之，问各几何？答曰：其七斤一十两九铢，钧二千一十二钱；其一石二钧二十斤八两二十铢，钧二千一十三钱。

　　今有出钱一万三千九百七十，买丝一石二钧二十八斤三两五铢。欲其贵贱斤率之，问各几何？答曰：其一石二钧七斤十两四铢，斤六十七钱；其二十斤九两一铢，斤六十八钱。

　　今有出钱一万三千九百七十，买丝一石二钧二十八斤三两五铢。欲其贵贱两率之，问各几何？答曰：其一石一钧一十七斤一十四两一铢，两四钱；其一钧一十斤五两四铢，两五钱。

　　其率术曰：各置所买石、钧、斤、两以为法，以所率乘钱数为实，实如法而一。不满法者，反以实减法。法贱实贵。其求石、钧、斤、两，以积铢各除法、实，各得其积数，余各为铢。

　　〔其率知，欲令无分。按：出钱五百七十六，买竹七十八个，以除钱，得七，实余三十，是为三十个复可增一钱。然则实余之数即是贵者之数，故曰实贵也。

　　本以七十八个为法，今以贵者减之，则其余悉是贱者之数。故曰法贱也。其求石、钧、斤、两，以积铢各除法、实，各得其积数，余各为铢者，谓石、钧、斤、两积铢除实，又以石、钧、斤、两积铢除法，余各为铢，即合所问。〕

　　今有出钱一万三千九百七十，买丝一石二钧二十八斤三两五铢。欲其贵贱铢率之，问各几何？答曰：其一钧二十斤六两十一铢，五铢一钱；其一石一钧七斤一十二两一十八铢，六铢一钱。

　　今有出钱六百二十，买羽二千一百翭。

　　〔翭，羽本也。数羽称其本，犹数草木称其根株。〕

　　欲其贵贱率之，问各几何？答曰：其一千一百四十翭，三翭一钱；其九百六十翭，四翭钱。

　　今有出钱九百八十，买矢榦五千八百二十枚。欲其贵贱率之，问各几何？答曰：其三百枚，五枚一钱；其五千五百二十枚，六枚一钱。

　　反其率术曰：以钱数为法，所率为实，实如法而一。不满法者，反以实减法。法少实多。二物各以所得多少之数乘法、实，即物数。

　　〔按：其率：出钱六百二十，买羽二千一百翭。反之，当二百四十钱，一钱翭；其三百八十钱，一钱三翭。是钱有二价，物有贵贱。故以羽乘钱，反其率也。

　　淳风等按：其率者，钱多物少；反其率知，钱少物多；多少相反，故曰反其率也。其率者，以物数为法，钱数为实。反之知，以钱数为法，物数为实。不满法知，实余也。当以余物化为钱矣。法为凡钱，而今以化钱减之，故以实减法。

　　法少知，经分之所得，故曰法少；实多者，余分之所益，故曰实多。乘实宜以多，乘法宜以少，故曰各以其所得多少之数乘法、实，即物数。〕

　　卷三

　　○衰分（以御贵贱禀税）

　　衰分〔衰分，差也。〕

　　术曰：各置列衰；〔列衰，相与率也。重叠，则可约。〕

　　副并为法，以所分乘未并者，各自为实。实如法而一。

　　〔法集而衰别。数，本一也。今以所分乘上别，以下集除之，一乘一除，适足相消，故所分犹存，且各应率而别也。于今有术，列衰各为所求率，副并为所有率，所分为所有数。又以经分言之，假令甲家三人，乙家二人，丙家一人，并六人，共分十二，为人得二也。欲复作逐家者，则当列置人数，以一人所得乘之。

　　今此术先乘而后除也。〕

　　不满法者，以法命之。

　　今有大夫、不更、簪袅、上造、公士，凡五人，共猎得五鹿。欲以爵次分之，问各得几何？答曰：大夫得一鹿三分鹿之二；不更得一鹿三分鹿之一；簪袅得一鹿；上造得三分鹿之二；公士得三分鹿之一。

　　术曰：列置爵数，各自为衰。

　　〔爵数者，谓大夫五，不更四，簪袅三，上造二，公士一也。《墨子号令篇》以爵级为赐，然则战国之初有此名也。〕

　　副并为法。以五鹿乘未并者各自为实。实如法得一鹿。

　　〔今有术，列衰各为所求率，副并为所有率，今有鹿数为所有数，而今有之，即得。〕

　　今有牛、马、羊食人苗。苗主责之粟五斗。羊主曰：“我羊食半马。”马主曰：“我马食半牛。”今欲衰偿之，问各出几何？答曰：牛主出二斗八升七分升之四；马主出一斗四升七分升之二；羊主出七升七分升之一。

　　术曰：置牛四、马二、羊一，各自为列衰，副并为法。以五斗乘未并者各自为实。实如法得一斗。

　　〔淳风等按：此术问意，羊食半马，马食半牛，是谓四羊当一牛，二羊当一马。今术置羊一、马二、牛四者，通其率以为列衰。〕

　　今有甲持钱五百六十，乙持钱三百五十，丙持钱一百八十，凡三人俱出关，关税百钱。欲以钱数多少衰出之，问各几何？答曰：甲出五十一钱一百九分钱之四十一；乙出三十二钱一百九分钱之一十二；丙出一十六钱一百九分钱之五十六。

　　术曰：各置钱数为列衰，副并为法。以百钱乘未并者，各自为实。实如法得一钱。

　　〔淳风等按：此术甲、乙、丙持钱数以为列衰，副并为所有率，未并者各为所求率，百钱为所有数，而今有之，即得。〕

　　今有女子善织，日自倍，五日织五尺。问日织几何？答曰：初日织一寸三十一分寸之十九；次日织三寸三十一分寸之七；次日织六寸三十一分寸之十四；次日织一尺二寸三十一分寸之二十八；次日织二尺五寸三十一分寸之二十五。

　　术曰：置一、二、四、八、十六为列衰，副并为法。以五尺乘未并者，各自为实。实如法得一尺。

　　今有北乡算八千七百五十八，西乡算七千二百三十六，南乡算八千三百五十六。凡三乡发徭三百七十八人。欲以算数多少衰出之，问各几何？答曰：北乡遣一百三十五人一万二千一百七十五分人之一万一千六百三十七；西乡遣一百一十二人一万二千一百七十五分人之四千四；南乡遣一百二十九人一万二千一百七十五分人之八千七百九。

　　术曰：各置算数为列衰，〔淳风等按：三乡算数，约，可半者，为列衰。〕

　　副并为法。以所发徭人数乘未并者，各自为实。实如法得一人。

　　〔按：此术，今有之义也。〕

　　今有禀粟，大夫、不更、簪袅、上造、公士，凡五人，一十五斗。今有大夫一人后来，亦当禀五斗。仓无粟，欲以衰出之，问各几何？答曰：大夫出一斗四分斗之一；不更出一斗；簪袅出四分斗之三；上造出四分斗之二；公士出四分斗之一。

　　术曰：各置所禀粟斛，斗数、爵次均之，以为列衰。副并而加后来大夫亦五斗，得二十以为法。以五斗乘未并者，各自为实。实如法得一斗。

　　〔禀前五人十五斗者，大夫得五斗，不更得四斗，簪袅得三斗，上造得二斗，公士得一斗。欲令五人各依所得粟多少减与后来大夫，即与前来大夫同。据前来大夫已得五斗，故言亦也。各以所得斗数为衰，并得十五，而加后来大夫亦五斗，凡二十，为法也。是为六人共出五斗，后来大夫亦俱损折。今有术，副并为所有率，未并者各为所求率，五斗为所有数，而今有之，即得。〕

　　今有禀粟五斛，五人分之。欲令三人得三，二人得二，问各几何？答曰：三人，人得一斛一斗五升十三分升之五；二人，人得七斗六升十三分升之十二。

　　术曰：置三人，人三；二人，人二，为列衰。副并为法。以五斛乘未并者各自为实。实如法得一斛。

　　反衰术曰：列置衰而令相乘，动者为不动者衰。

　　今有大夫、不更、簪袅、上造、公士凡五人，共出百钱。欲令高爵出少，以次渐多，问各几何？答曰：大夫出八钱一百三十七分钱之一百四；不更出一十钱一百三十七分钱之一百三十；簪袅出一十四钱一百三十七分钱之八十二；上造出二十一钱一百三十七分钱之一百二十三；公士出四十三钱一百三十七分钱之一百九。

　　术曰：置爵数，各自为衰，而反衰之。副并为法。以百钱乘未并者，各自为实。实如法得一钱。

　　〔以爵次言之，大夫五、不更四。欲令高爵得多者，当使大夫一人受五分，不更一人受四分。人数为母，分数为子。母同则子齐，齐即衰也。故上衰分宜以五、四为列焉。今此令高爵出少，则当大夫五人共出一人分，不更四人共出一人分，故谓之反衰。人数不同，则分数不齐。当令母互乘子。母互乘子，则动者为不动者衰也。亦可先同其母，各以分母约，其子为反衰。副并为法。以所分乘未并者，各自为实。实如法而一。〕

　　今有甲持粟三升，乙持粝米三升，丙持粝饭三升。欲令合而分之，问各几何？答曰：甲二升一十分升之七；乙四升一十分升之五；丙一升一十分升之八。

　　术曰：以粟率五十、粝米率三十、粝饭率七十五为衰，而反衰之。副并为法。

　　以九升乘未并者，各自为实。实如法得一升。

　　〔按：此术，三人所持升数虽等，论其本率，精粗不同。米率虽少，令最得多；饭率虽多，反使得少。故令反之，使精得多而粗得少。于今有术，副并为所有率，未并者各为所求率，九升为所有数，而今有之，即得。〕

　　今有丝一斤，价直二百四十。今有钱一千三百二十八，问得丝几何？答曰：五斤八两一十二铢五分铢之四。

　　术曰：以一斤价数为法，以一斤乘今有钱数为实。实如法得丝数。

　　〔按：此术今有之义，以一斤价为所有率，一斤为所求率，今有钱为所有数，而今有之，即得。〕

　　今有丝一斤，价直三百四十五。今有丝七两一十二铢，问得钱几何？答曰：一百六十一钱三十二分钱之二十三。

　　术曰：以一斤铢数为法，以一斤价数乘七两一十二铢为实。实如法得钱数。

　　〔淳风等按：此术亦今有之义。以丝一斤铢数为所有率，价钱为所求率，今有丝为所有数，而今有之，即得。〕

　　今有缣一丈，价直一百二十八。今有缣一匹九尺五寸，问得钱几何？答曰：六百三十三钱五分钱之三。

　　术曰：以一丈寸数为法，以价钱数乘今有缣寸数为实。实如法得钱数。

　　〔淳风等按：此术亦今有之义。以缣一丈寸数为所有率，价钱为所求率，今有缣寸数为所有数，而今有之，即得。〕

　　今有布一匹，价直一百二十五。今有布二丈七尺，问得钱几何？答曰：八十四钱八分钱之三。

　　术曰：以一匹尺数为法，今有布尺数乘价钱为实。实如法得钱数。

　　〔淳风等按：此术亦今有之义。以一匹尺数为所有率，价钱为所求率，今有布为所有数，今有之，即得。〕

　　今有素一匹一丈，价直六百二十五。今有钱五百，问得素几何？答曰：得素一匹。

　　术曰：以价直为法，以一匹一丈尺数乘今有钱数为实。实如法得素数。

　　〔淳风等按：此术亦今有之义。以价钱为所有率，五丈尺数为所求率，今有钱为所有数，今有之，即得。〕

　　今有与人丝一十四斤，约得缣一十斤。今与人丝四十五斤八两，问得缣几何？答曰：三十二斤八两。

　　术曰：以一十四斤两数为法，以一十斤乘今有丝两数为实。实如法得缣数。

　　〔淳风等按：此术亦今有之义。以一十四斤两数为所有率，一十斤为所求率，今有丝为所有数，而今有之，即得。〕

　　今有丝一斤，耗七两。今有丝二十三斤五两，问耗几何？答曰：一百六十三两四铢半。

　　术曰：以一斤展十六两为法。以七两乘今有丝两数为实。实如法得耗数。

　　〔淳风等按：此术亦今有之义。以一斤为十六两为所有率，七两为所求率，今有丝为所有数，而今有之，即得。〕

　　今有生丝三十斤，干之，耗三斤十二两。今有干丝一十二斤，问生丝几何？答曰：一十三斤一十一两十铢七分铢之二。

　　术曰：置生丝两数，除耗数，余，以为法。

　　〔馀四百二十两，即干丝率。〕

　　三十斤乘干丝两数为实。实如法得生丝数。

　　〔凡所得率，如细则俱细，粗则俱粗，两数相抱而已。故品物不同，如上缣、丝之比，相与率焉。三十斤凡四百八十两，今生丝率四百八十两，今干丝率四百二十两，则其数相通。可俱为铢，可俱为两，可俱为斤，，无所归滞也。若然，宜以所有干丝斤数乘生丝两数为实。今以斤、两错互而亦同归者，使干丝以两数为率，生丝以斤数为率，譬之异类，亦各有一定之势。

　　淳风等按：此术，置生丝两数，除耗数，余即干丝之率，于今有术为所有率；三十斤为所求率，干丝两数为所有数。凡所为率者，细则俱细，粗则俱粗。今有一斤乘两知，干丝即以两数为率，生丝即以斤数为率，譬之异物，各有一定之率也。〕

　　今有田一亩，收粟六升太半升。今有田一顷二十六亩一百五十九步，问收粟几何？答曰：八斛四斗四升一十二分升之五。

　　术曰：以亩二百四十步为法。以六升太半升乘今有田积步为实。实如法得粟数。

　　〔淳风等按：此术亦今有之义。以一亩步数为所有率，六升太半升为所求率，今有田积步为所有数，而今有之，即得。〕

　　今有取保，一岁价钱二千五百。今先取一千二百，问当作日几何？答曰：一百六十九日二十五分日之二十三。

　　术曰：以价钱为法，以一岁三百五十四日乘先取钱数为实。实如法得日数。

　　〔淳风等按：此术亦今有之义。以价为所有率，一岁日数为所求率，取钱为所有数，而今有之，即得。〕

　　今有贷人千钱，月息三十。今有贷人七百五十钱，九日归之，问息几何？答曰：六钱四分钱之三。

　　术曰：以月三十日乘千钱为法。

　　〔以三十日乘千钱为法者，得三万，是为贷人钱三万，一日息三十也。〕

　　以息三十乘今所贷钱数，又以九日乘之，为实。实如法得一钱。

　　〔以九日乘今所贷钱为今一日所有钱，于今有术为所有数，息三十为所求率；三万钱为所有率。此又可以一月三十日约息三十钱，为十分一日，以乘今一日所有钱为实；千钱为法。为率者，当等之于一也。故三十日或可乘本，或可约息，皆所以等之也。〕

　　卷四

　　○少广（以御积幂方圆）

　　少广〔淳风等按：一亩之田，广一步，长二百四十步。今欲截取其从少，以益其广，故曰少广。〕

　　术曰：置全步及分母子，以最下分母遍乘诸分子及全步，〔淳风等按：以分母乘全步者，通其分也；以母乘子者，齐其子也。〕

　　各以其母除其子，置之于左，命通分者，又以分母遍乘诸分子及已通者，皆通而同之。并之为法。

　　〔淳风等按：诸子悉通，故可并之为法。亦宜用合分术，列数尤多，若用乘则算数至繁，故别制此术，从省约。〕

　　置所求步数，以全步积分乘之为实。

　　〔此以田广为法，以亩积步为实。法有分者，当同其母，齐其子，以同乘法实，而并齐于法。今以分母乘全步及子，子如母而一，并以并全法，则法实俱长，意亦等也。故如法而一，得从步数。〕

　　实如法而一，得从步。

　　今有田广一步半。求田一亩，问从几何？答曰：一百六十步。

　　术曰：下有半，是二分之一。以一为二，半为一，并之，得三，为法。置田二百四十步，亦以一为二乘之，为实。实如法得从步。

　　今有田广一步半、三分步之一。求田一亩，问从几何？答曰：一百三十步一十一分步之一十。

　　术曰：下有三分，以一为六，半为三，三分之一为二，并之，得一十一，为法。置田二百四十步，亦以一为六乘之，为实。实如法得从步。

　　今有田广一步半、三分步之一、四分步之一。求田一亩，问从几何？答曰：一百一十五步五分步之一。

　　术曰：下有四分，以一为一十二，半为六，三分之一为四，四分之一为三，并之，得二十五，以为法。置田二百四十步，亦以一为一十二乘之，为实。实如法而一，得从步。

　　今有田广一步半、三分步之一、四分步之一、五分步之一。求田一亩，问从几何？答曰：一百五步一百三十七分步之一十五。

　　术曰：下有五分，以一为六十，半为三十，三分之一为二十，四分之一为一十五，五分之一为一十二，并之，得一百三十七，以为法。置田二百四十步，亦以一为六十乘之，为实。实如法得从步。

　　今有田广一步半、三分步之一、四分步之一、五分步之一、六分步之一。求田一亩，问从几何？答曰：九十七步四十九分步之四十七。

　　术曰：下有六分，以一为一百二十，半为六十，三分之一为四十，四分之一为三十，五分之一为二十四，六分之一为二十，并之，得二百九十四，以为法。

　　置田二百四十步，亦以一为一百二十乘之，为实。实如法得从步。

　　今有田广一步半、三分步之一、四分步之一、五分步之一、六分步之一、七分步之一。求田一亩，问从几何？答曰：九十二步一百二十一分步之六十八。

　　术曰：下有七分，以一为四百二十，半为二百一十，三分之一为一百四十，四分之一为一百五，五分之一为八十四，六分之一为七十，七分之一为六十，并之，得一千八十九，以为法。置田二百四十步，亦以一为四百二十乘之，为实。

　　实如法得从步。

　　今有田广一步半、三分步之一、四分步之一、五分步之一、六分步之一、七分步之一、八分步之一。求田一亩，问从几何？答曰：八十八步七百六十一分步之二百三十二。

　　术曰：下有八分，以一为八百四十，半为四百二十，三分之一为二百八十，四分之一为二百一十，五分之一为一百六十八，六分之一为一百四十，七分之一为一百二十，八分之一为一百五，并之，得二千二百八十三，以为法。置田二百四十步，亦以一为八百四十乘之，为实。实如法得从步。

　　今有田广一步半、三分步之一、四分步之一、五分步之一、六分步之一、七分步之一、八分步之一、九分步之一。求田一亩，问从几何？答曰：八十四步七千一百二十九分步之五千九百六十四。

　　术曰：下有九分，以一为二千五百二十，半为一千二百六十，三分之一为八百四十，四分之一为六百三十，五分之一为五百四，六分之一为四百二十，七分之一为三百六十，八分之一为三百一十五，九分之一为二百八十，并之，得七千一百二十九，以为法。置田二百四十步，亦以一为二千五百二十乘之，为实。实如法得从步。

　　今有田广一步半、三分步之一、四分步之一、五分步之一、六分步之一、七分步之一、八分步之一、九分步之一、十分步之一。求田一亩、问从几何？答曰：八十一步七千三百八十一分步之六千九百三十九。

　　术曰：下有一十分，以一为二千五百二十，半为一千二百六十，三分之一为八百四十，四分之一为六百三十，五分之一为五百四，六分之一为四百二十，七分之一为三百六十，八分之一为三百一十五，九分之一为二百八十，十分之一为二百五十二，并之，得七千三百八十一，以为法。置田二百四十步，亦以一为二千五百二十乘之，为实。实如法得从步。

　　今有田广一步半、三分步之一、四分之步一、五分步之一、六分步之一、七分步之一、八分步之一、九分步之一、十分步之一、十一分步之一。求田一亩，问从几何？答曰：七十九步八万三千七百一十一分步之三万九千六百三十一。

　　术曰：下有一十一分，以一为二万七千七百二十，半为一万三千八百六十，三分之一为九千二百四十，四分之一为六千九百三十，五分之一为五千五百四十四，六分之一为四千六百二十，七分之一为三千九百六十，八分之一为三千四百六十五，九分之一为三千八十，一十分之一为二千七百七十二，一十一分之一为二千五百二十，并之，得八万三千七百一十一，以为法。置田二百四十步，亦以一为二万七千七百二十乘之，为实。实如法得从步。

　　今有田广一步半、三分步之一、四分步之一，五分步之一、六分步之一、七分步之一、八分步之一、九分步之一、十分步之一、十一分步之一、十二分步之一。求田一亩，问从几何？答曰：七十七步八万六千二十一分步之二万九千一百八十三。

　　术曰：下有一十二分，以一为八万三千一百六十，半为四万一千五百八十，三分之一为二万七千七百二十，四分之一为二万七百九十，五分之一为一万六千六百三十二，六分之一为一万三千八百六十，七分之一为一万一千八百八十，八分之一为一万三百九十五，九分之一为九千二百四十，一十分之一为八千三百一十六，十一分之一为七千五百六十，十二分之一为六千九百三十，并之，得二十五万八千六十三，以为法。置田二百四十步，亦以一为八万三千一百六十乘之，为实。实如法得从步。

　　〔淳风等按：凡为术之意，约省为善。宜云“下有一十二分，以一为二万七千七百二十，半为一万三千八百六十，三分之一为九千二百四十，四分之一为六千九百三十，五分之一为五千五百四十四，六分之一为四千六百二十，七分之一为三千九百六十，八分之一为三千四百六十五，九分之一为三千八十，十分之一为二千七百七十二，十一分之一为二千五百二十，十二分之一为二千三百一十，并之，得八万六千二十一，以为法。置田二百四十步，亦以一为二万七千七百二十乘之，以为实。实如法得从步。”其术亦得知，不繁也。〕

　　今有积五万五千二百二十五步，问为方几何？答曰：二百三十五步。

　　又有积二万五千二百八十一步，问为方几何？答曰：一百五十九步。

　　又有积七万一千八百二十四步，问为方几何？答曰：二百六十八步。

　　又有积五十六万四千七百五十二步四分步之一，问为方几何？答曰：七百五十一步半。

　　又有积三十九亿七千二百一十五万六百二十五步，问为方几何？答曰：六万三千二十五步。

　　○开方

　　〔求方幂之一面也。〕

　　术曰：置积为实。借一算，步之，超一等。

　　〔言百之面十也。言万之面百也。〕

　　议所得，以一乘所借一算为法，而以除。

　　〔先得黄甲之面，上下相命，是自乘而除也。〕

　　除已，倍法为定法。

　　〔倍之者，豫张两面朱幂定袤，以待复除，故曰定法。〕

　　其复除，折法而下。

　　〔欲除朱幂者，本当副置所得成方，倍之为定法，以折、议、乘，而以除。

　　如是当复步之而止，乃得相命。故使就上折下。〕

　　复置借算，步之如初。以复议一乘之，〔欲除朱幂之角黄乙之幂，其意如初之所得也。〕

　　所得副以加定法，以除。以所得副从定法。

　　〔再以黄乙之面加定法者，是则张两青幂之袤。〕

　　复除，折下如前。若开之不尽者，为不可开，当以面命之。

　　〔术或有以借算加定法而命分者，虽粗相近，不可用也。凡开积为方，方之自乘当还复有积分。令不加借算而命分，则常微少；其加借算而命分，则又微多。

　　其数不可得而定。故惟以面命之，为不失耳。譬犹以三除十，以其余为三分之一，而复其数可以举。不以面命之，加定法如前，求其微数。微数无名者以为分子，其一退以十为母，其再退以百为母。退之弥下，其分弥细，则朱幂虽有所弃之数，不足言之也。〕

　　若实有分者，通分内子为定实，乃开之。讫，开其母，报除。

　　〔淳风等按：分母可开者，并通之积先合二母。既开之后，一母尚存，故开分母，求一母为法，以报除也。〕

　　若母不可开者，又以母乘定实，乃开之。讫，令如母而一。

　　〔淳风等按：分母不可开者，本一母也。又以母乘之，乃合二母。既开之后，亦一母存焉，故令一母而一，得全面也。

　　又按：此术“开方”者，求方幂之面也。借一算者，假借一算，空有列位之名，而无除积之实。方隅得面，是故借算列之于下。“步之超一等”者，方十自乘，其积有百，方百自乘，其积有万，故超位，至百而言十，至万而言百。“议所得，以一乘所借算为法，而以除”者，先得黄甲之面，以方为积者两相乘，故开方除之，还令两面上下相命，是自乘而除之。“除已，倍法为定法”者，实积未尽，当复更除，故豫张两面朱幂袤，以待复除，故曰定法。“其复除，折法而下”者，欲除朱幂，本当副置所得成方，倍之为定法，以折、议、乘之，而以除，如是，当复步之而止，乃得相命。故使就上折之而下。“复置借算，步之如初，以复议一乘之，所得副以加定法，以定法除”者。欲除朱幂之角黄乙之幂。“以所得副从定法”者，再以黄乙之面加定法，是则张两青幂之袤，故如前开之，即合所问。〕

　　今有积一千五百一十八步四分步之三。问为圆周几何？答曰：一百三十五步。

　　〔于徽术，当周一百三十八步一十分步之一。

　　淳风等按：此依密率，为周一百三十八步五十分步之九。〕

　　又有积三百步，问为圆周几何？答曰：六十步。

　　〔于徽术，当周六十一步五十分步之十九。

　　淳风等按：依密率，为周六十一步一百分步之四十一。〕

　　开圆术曰：置积步数，以十二乘之，以开方除之，即得周。

　　〔此术以周三径一为率，与旧圆田术相返覆也。于徽术，以三百一十四乘积，如二十五而一，所得，开方除之，即周也。开方除之，即径。是为据见幂以求周，犹失之于微少。其以二百乘积，一百五十七而一，开方除之，即径，犹失之于微多。

　　淳风等按：此注于徽术求周之法，其中不用“开方除之，即径”六字，今本有者，衍剩也。依密率，八十八乘之，七而一。按周三径一之率，假令周六径二，半周半径相乘得幂三，周六自乘得三十六。俱以等数除幂，得一周之数十二也。其积：本周自乘，合以一乘之，十二而一，得积三也。术为一乘不长，故以十二而一，得此积。今还原，置此积三，以十二乘之者，复其本周自乘之数。凡物自乘，开方除之，复其本数，故开方除之，即周。〕

　　今有积一百八十六万八百六十七尺，〔此尺谓立方尺也。凡物有高、深而言积者，曰立方。〕

　　问为立方几何？答曰：一百二十三尺。

　　又有积一千九百五十三尺八分尺之一，问为立方几何？答曰：一十二尺半。

　　又有积六万三千四百一尺五百一十二分尺之四百四十七，问为立方几何？答曰：三十九尺八分尺之七。

　　又有积一百九十三万七千五百四十一尺二十七分尺之一十七，问为立方几何？答曰：一百二十四尺太半尺。

　　开立方〔立方适等，求其一面也。〕

　　术曰：置积为实。借一算，步之，超二等。

　　〔言千之面十，言百万之面百。〕

　　议所得，以再乘所借一算为法，而除之。

　　〔再乘者，亦求为方幂。以上议命而除之，则立方等也。〕

　　除已，三之为定法。

　　〔为当复除，故豫张三面，以定方幂为定法也。〕

　　复除，折而下。

　　〔复除者，三面方幂以皆自乘之数，须得折、议，定其厚薄尔。开平幂者，方百之面十；开立幂者，方千之面十。据定法已有成方之幂，故复除当以千为百，折下一等也。〕

　　以三乘所得数，置中行。

　　〔设三廉之定长。〕

　　复借一算，置下行。

　　〔欲以为隅方。立方等未有定数，且置一算定其位。〕

　　步之，中超一，下超二等。

　　〔上方法，长自乘而一折，中廉法，但有长，故降一等；下隅法，无面长，故又降一等也。〕

　　复置议，以一乘中，〔为三廉备幂也。〕

　　再乘下，〔令隅自乘，为方幂也。〕

　　皆副以加定法。以定法除。

　　〔三面、三廉、一隅皆已有幂，以上议命之而除，去三幂之厚也。〕

　　除已，倍下，并中，从定法。

　　〔凡再以中、三以下，加定法者，三廉各当以两面之幂连于两方之面，一隅连于三廉之端，以待复除也。言不尽意，解此要当以棋，乃得明耳。〕

　　复除，折下如前。开之不尽者，亦为不可开。

　　〔术亦有以定法命分者，不如故幂开方，以微数为分也。〕

　　若积有分者，通分内子为定实。定实乃开之。讫，开其母以报除。

　　〔淳风等按：分母可开者，并通之积先合三母。既开之后一母尚存，故开分母，求一母，为法，以报除也。〕

　　若母不可开者，又以母再乘定实，乃开之。讫，令如母而一。

　　〔淳风等按：分母不可开者，本一母也。又以母再乘之，令合三母。既开之后，一母犹存，故令一母而一，得全面也。

　　按：“开立方”知，立方适等，求其一面之数。“借一算，步之，超二等”者，但立方求积，方再自乘，就积开之，故超二等，言千之面十，言百万之面百。

　　“议所得，以再乘所借算为法，而以除”知，求为方幂，以议命之而除，则立方等也。“除已，三之为定法”，为积未尽，当复更除，故豫张三面已定方幂为定法。“复除，折而下”知，三面方幂皆已有自乘之数，须得折、议定其厚薄。据开平方，百之面十，其开立方，即千之面十。而定法已有成方之幂，故复除之者，当以千为百，折下一等。“以三乘所得数，置中行”者，设三廉之定长。“复借一算，置下行”者，欲以为隅方，立方等未有数，且置一算定其位也。“步之，中超一，下超二”者，上方法长自乘而一折，中廉法但有长，故降一等，下隅法无面长，故又降一等。“复置议，以一乘中”者，为三廉备幂。“再乘下”，当令隅自乘为方幂。“皆副以加定法，以定法除者，三面、三廉、一隅皆已有幂，以上议命之而除，去三幂之厚。“除已，倍下、并中，从定法”者，三廉各当以两面之幂连于两方之面，一隅连于三廉之端，以待复除。其开之不尽者，折下如前，开方，即合所问。“有分者，通分内子开之。讫，开其母以报除”，“可开者，并通之积，先合三母；既开之后，一母尚存，故开分母”者，“求一母为法，以报除。”“若母不可开者，又以母再乘定实，乃开之。讫，令如母而一”，分母不可开者，本一母，又以母再乘，令合三母，既开之后，亦一母尚存。故令如母而一，得全面也。〕

　　今有积四千五百尺。

　　〔亦谓立方之尺也。〕

　　问为立圆径几何？答曰：二十尺。

　　〔依密率，立圆径二十尺，计积四千一百九十尺二十一分尺之一十。〕

　　又有积一万六千四百四十八亿六千六百四十三万七千五百尺。问为立圆径几何？答曰：一万四千三百尺。

　　〔依密率，为径一万四千六百四十三尺四分尺之三。〕

　　开立圆术曰：置积尺数，以十六乘之，九而一，所得，开立方除之，即立圆径。

　　〔立圆，即丸也。为术者，盖依周三径一之率。令圆幂居方幂四分之三，圆囷居立方亦四分之三。更令圆囷为方率十二，为丸率九，丸居圆囷又四分之三也。

　　置四分自乘得十六，三分自乘得九，故丸居立方十六分之九也。故以十六乘积，九而一，得立方之积。丸径与立方等，故开立方而除，得径也。然此意非也。何以验之？取立方棋八枚，皆令立方一寸，积之为立方二寸。规之为圆囷，径二寸，高二寸。又复横因之，则其形有似牟合方盖矣。八棋皆似阳马，圆然也。按：合盖者，方率也，丸居其中，即圆率也。推此言之，谓夫圆囷为方率，岂不阙哉？以周三径一为圆率，则圆幂伤少；令圆囷为方率，则丸积伤多，互相通补，是以九与十六之率偶与实相近，而丸犹伤多耳。观立方之内，合盖之外，虽衰杀有渐，而多少不掩。判合总结，方圆相缠，浓纤诡互，不可等正。欲陋形措意，惧失正理。敢不阙疑，以俟能言者。

　　黄金方寸，重十六两；金丸径寸，重九两，率生于此，未曾验也。《周官考工记》：“朅氏为量，改煎金锡则不耗，不耗然后权之，权之然后准之，准之然后量之。”言炼金使极精，而后分之则可以为率也。令丸径自乘，三而一，开方除之，即丸中之立方也。假令丸中立方五尺，五尺为句，句自乘幂二十五尺。

　　倍之得五十尺，以为弦幂，谓平面方五尺之弦也。以此弦为股，亦以五尺为句，并句股幂得七十五尺，是为大弦幂。开方除之，则大弦可知也。大弦则中立方之长邪，邪即丸径。故中立方自乘之幂于丸径自乘之幂，三分之一也。今大弦还乘其幂，即丸外立方之积也。大弦幂开之不尽，令其幂七十五再自乘之，为面，命得外立方积，四十二万一千八百七十五尺之面。又令中立方五尺自乘，又以方乘之，得积一百二十五尺，一百二十五尺自乘，为面，命得积，一万五千六百二十五尺之面。皆以六百二十五约之，外立方积，六百七十五尺之面，中立方积，二十五尺之面也。

　　张衡算又谓立方为质，立圆为浑。衡言质之与中外之浑：六百七十五尺之面，开方除之，不足一，谓外浑积二十六也；内浑，二十五之面，谓积五尺也。今徽令质言中浑，浑又言质，则二质相与之率犹衡二浑相与之率也。衡盖亦先二质之率推以言浑之率也。衡又言：“质，六十四之面；浑，二十五之面。”质复言浑，谓居质八分之五也。又云：方，八之面；圆，五之面。”圆浑相推，知其复以圆囷为方率，浑为圆率也，失之远矣。衡说之自然欲协其阴阳奇偶之说而不顾疏密矣。虽有文辞，斯乱道破义，病也。置外质积二十六，以九乘之，十六而一，得积十四尺八分尺之五，即质中之浑也。以分母乘全内子，得一百一十七。又置内质积五，以分母乘之，得四十，是谓质居浑一百一十七分之四十，而浑率犹为伤多也。假令方二尺，方四面，并得八尺也，谓之方周。其中令圆径与方等，亦二尺也。圆半径以乘圆周之半，即圆幂也。半方以乘方周之半，即方幂也。然则方周知，方幂之率也；圆周知，圆幂之率也。按：如衡术，方周率八之面，圆周率五之面也。令方周六十四尺之面，圆周四十尺之面也。又令径二尺自乘，得径四尺之面，是为圆周率十之面，而径率一之面也。衡亦以周三径一之率为非，是故更著此法，然增周太多，过其实矣。

　　淳风等按：祖暅之谓刘徽、张衡二人皆以圆囷为方率，丸为圆率，乃设新法。祖暅之开立圆术曰：“以二乘积，开立方除之，即立圆径。其意何也？取立方棋一枚，令立枢于左后之下隅，从规去其右上之廉；又合而衡规之，去其前上之廉。于是立方之棋分而为四，规内棋一，谓之内棋；规外棋三，谓之外棋。

　　规更合四棋，复横断之。以句股言之，令余高为句，内棋断上方为股，本方之数，其弦也。句股之法：以句幂减弦幂，则余为股幂。若令余高自乘，减本方之幂，余即内棋断上方之幂也。本方之幂即此四棋之断上幂。然则余高自乘，即外三棋之断上幂矣。不问高卑，势皆然也。然固有所归同而途殊者尔。而乃控远以演类，借况以析微。按：阳马方高数参等者，倒而立之，横截去上，则高自乘与断上幂数亦等焉。夫叠棋成立积，缘幂势既同，则积不容异。由此观之，规之外三棋旁蹙为一，即一阳马也。三分立方，则阳马居一，内棋居二可知矣。合八小方成一大方，合八内棋成一合盖。内棋居小方三分之二，则合盖居立方亦三分之二，较然验矣。置三分之二，以圆幂率三乘之，如方幂率四而一，约而定之，以为丸率。

　　故曰丸居立方二分之一也。”等数既密，心亦昭晢。张衡放旧，贻哂于后，刘徽循故，未暇校新。夫岂难哉，抑未之思也。依密率，此立圆积，本以圆径再自乘，十一乘之，二十一而一，得此积。今欲求其本积，故以二十一乘之，十一而一。

　　凡物再自乘，开立方除之，复其本数。故立方除之，即丸径也。〕

　　卷五

　　○商功（以御功程积实）

　　今有穿地，积一万尺。问为坚、壤各几何？答曰：为坚七千五百尺；为壤一万二千五百尺。

　　术曰：穿地四为壤五，〔壤谓息土。〕

　　为坚三，〔坚谓筑土。〕

　　为墟四。

　　〔墟谓穿坑。此皆其常率。〕

　　以穿地求壤，五之；求坚，三之；皆四而一。

　　〔今有术也。〕

　　以壤求穿，四之；求坚，三之；皆五而一。以坚求穿，四之；求壤，五之；皆三而一。

　　〔淳风等按：此术并今有之义也。重张穿地积一万尺，为所有数，坚率三、壤率五各为所求率，穿率四为所有率，而今有之，即得。〕

　　城、垣、堤、沟、堑、渠皆同术。

　　术曰：并上下广而半之，〔损广补狭。〕

　　以高若深乘之，又以袤乘之，即积尺。

　　〔按：此术“并上下广而半之”者，以盈补虚，得中平之广。“以高若深乘之”，得一头之立幂。“又以袤乘之”者，得立实之积，故为积尺。〕

　　今有穿地，袤一丈六尺，深一丈，上广六尺，为垣积五百七十六尺。问穿地下广几何？答曰：三尺五分尺之三。

　　术曰：置垣积尺，四之为实。

　　〔穿地四，为坚三。垣，坚也。以坚求穿地，当四之，三而一也。〕

　　以深、袤相乘，〔为深、袤之立实也。〕

　　又三之，为法。

　　〔以深、袤乘之立实除垣积，即坑广。又三之者，与坚率并除之。〕

　　所得，倍之。

　　〔为坑有两广，先并而半之，即为广狭之中平。今先得其中平，故又倍之知，两广全也。〕

　　减上广，余即下广。

　　〔按：此术穿地四，为坚三。垣即坚也。今以坚求穿地，当四乘之，三而一。

　　深、袤相乘者，为深袤立幂。以深袤立幂除积，即坑广。又三之，为法，与坚率并除。所得，倍之者，为坑有两广，先并而半之，为中平之广。今此得中平之广，故倍之还为两广并。故减上广，余即下广也。〕

　　今有城下广四丈，上广二丈，高五丈，袤一百二十六丈五尺。问积几何？答曰：一百八十九万七千五百尺：今有垣下广三尺，上广二尺，高一丈二尺，袤二十二丈五尺八寸。问积几何？答曰：六千七百七十四尺。

　　今有堤下广二丈，上广八尺，高四尺，袤一十二丈七尺。问积几何？答曰：七千一百一十二尺。

　　冬程人功四百四十四尺，问用徒几何？答曰：一十六人二百一十一分人之二。

　　术曰：以积尺为实，程功尺数为法，实如法而一，即用徒人数。

　　今有沟，上广一丈五尺，下广一丈，深五尺，袤七丈。问积几何？答曰：四千三百七十五尺。

　　春程人功七百六十六尺，并出土功五分之一，定功六百一十二尺五分尺之四。

　　问用徒几何？答曰：七人三千六十四分人之四百二十七。

　　术曰：置本人功，去其五分之一，余为法。

　　〔“去其五分之一”者，谓以四乘，五除也。〕

　　以沟积尺为实，实如法而一，得用徒人数。

　　〔按：此术“置本人功，去其五分之一”者，谓以四乘之，五而一，除去出土之功，取其定功。乃通分内子以为法。以分母乘沟积尺为实者，法里有分，实里通之，故实如法而一，即用徒人数。此以一人之积尺除其众尺，故用徒人数。

　　不尽者，等数约之而命分也。〕

　　今有堑，上广一丈六尺三寸，下广一丈，深六尺三寸，袤一十三丈二尺一寸。

　　问积几何？答曰：一万九百四十三尺八寸。

　　〔八寸者，谓穿地方尺，深八寸。此积余有方尺中二分四厘五毫，弃之。文欲从易，非其常定也。〕

　　夏程人功八百七十一尺，并出土功五分之一，沙砾水石之功作太半，定功二百三十二尺一十五分尺之四。问用徒几何？答曰：四十七人三千四百八十四分人之四百九。

　　术曰：置本人功，去其出土功五分之一，又去沙砾水石之功太半，余为法。

　　以堑积尺为实。实如法而一，即用徒人数。

　　〔按：此术“置本人功，去其出土功五分之一”者，谓以四乘，五除。“又去沙砾水石作太半”者，一乘，三除，存其少半，取其定功。乃通分内子以为法。

　　以分母乘堑积尺为实者，为法里有分，实里通之，故实如法而一，即用徒人数。

　　不尽者，等数约之而命分也。〕

　　今有穿渠，上广一丈八尺，下广三尺六寸，深一丈八尺，袤五万一千八百二十四尺。问积几何？答曰：一千七万四千五百八十五尺六寸。

　　秋程人功三百尺，问用徒几何？答曰：三万三千五百八十二人，功内少一十四尺四寸。

　　一千人先到，问当受袤几何？答曰：一百五十四丈三尺二寸八十一分寸之八。

　　术曰：以一人功尺数乘先到人数为实。

　　〔以一千人一日功为实。立实为功。〕

　　并渠上下广而半之，以深乘之，为法。

　　〔以渠广深之立实为法。〕

　　实如法得袤尺。

　　今有方堡壔，〔堡者，堡城也；壔，音丁老反，又音纛，谓以土拥木也。〕

　　方一丈六尺，高一丈五尺。问积几何？答曰：三千八百四十尺。

　　术曰：方自乘，以高乘之，即积尺。

　　今有圆堡瑽，周四丈八尺，高一丈一尺。问积几何？答曰：二千一百一十二尺。

　　〔于徽术，当积二千一十七尺一百五十七分尺之一百三十一。

　　淳风等按：依密率，积二千一十六尺。〕

　　术曰：周自相乘，以高乘之，十二而一。

　　〔此章诸术亦以周三径一为率，皆非也。于徽术当以周自乘，以高乘之，又以二十五乘之，三百一十四而一。此之圆幂亦如圆田之幂也。求幂亦如圆田，而以高乘幂也。

　　淳风等按：依密率，以七乘之，八十八而一。〕

　　今有方亭，下方五丈，上方四丈，高五丈。问积几何？答曰：一十万一千六百六十六尺太半尺。

　　术曰：上下方相乘，又各自乘，并之，以高乘之，三而一。

　　〔此章有堑堵、阳马，皆合而成立方。盖说算者乃立棋三品，以效高深之积。

　　假令方亭，上方一尺，下方三尺，高一尺。其用棋也，中央立方一，四面堑堵四，四角阳马四。上下方相乘为三尺，以高乘之，得积三尺，是为得中央立方一，四面堑堵各一。下方自乘为九，以高乘之，得积九尺。是为中央立方一、四面堑堵各二、四角阳马各三也。上方自乘，以高乘之，得积一尺，又为中央立方一。凡三品棋皆一而为三，故三而一，得积尺。用棋之数：立方三、堑堵阳马各十二，凡二十七，棋十三。更差次之，而成方亭者三，验矣。为术又可令方差自乘，以高乘之，三而一，即四阳马也；上下方相乘，以高乘之，即中央立方及四面堑堵也。并之，以为方亭积数也。〕

　　今有圆亭，下周三丈，上周二丈，高一丈。问积几何？答曰：五百二十七尺九分尺之七。

　　〔于徽术，当积五百四尺四百七十一分尺之一百一十六也。

　　淳风等按：依密率，为积五百三尺三十三分尺之二十六。〕

　　术曰：上下周相乘，又各自乘，并之，以高乘之，三十六而一。

　　〔此术周三径一之义。合以三除上下周，各为上下径。以相乘，又各自乘，并，以高乘之，三而一，为方亭之积。假令三约上下周俱不尽，还通之，即各为上下径。令上下径相乘，又各自乘，并，以高乘之，为三方亭之积分。此合分母三相乘得九，为法，除之。又三而一，得方亭之积。从方亭求圆亭之积，亦犹方幂中求圆幂。乃令圆率三乘之，方率四而一，得圆亭之积。前求方亭之积，乃以三而一；今求圆亭之积，亦合三乘之。二母既同，故相准折，惟以方幂四乘分母九，得三十六，而连除之。于徽术，当上下周相乘，又各自乘，并，以高乘之，又二十五乘之，九百四十二而一。此方亭四角圆杀，比于方亭，二百分之一百五十七。为术之意，先作方亭，三而一。则此据上下径为之者，当又以一百五十七乘之，六百而一也。今据周为之，若于圆堡昪，又以二十五乘之，三百一十四而一，则先得三圆亭矣。故以三百一十四为九百四十二而一，并除之。

　　淳风等按：依密率，以七乘之，二百六十四而一。〕

　　今有方锥，下方二丈七尺，高二丈九尺。问积几何？答曰：七千四十七尺。

　　术曰：下方自乘，以高乘之，三而一。

　　〔按：此术假令方锥下方二尺，高一尺，即四阳马。如术为之，用十二阳马成三方锥。故三而一，得方锥也。〕

　　今有圆锥，下周三丈五尺，高五丈一尺。问积几何？答曰：一千七百三十五尺一十二分尺之五。

　　〔于徽术，当积一千六百五十八尺三百一十四分尺之十三。

　　淳风等按：依密率，为积一千六百五十六尺八十八分尺之四十七。〕

　　术曰：下周自乘，以高乘之，三十六而一。

　　〔按：此术圆锥下周以为方锥下方。方锥下方令自乘，以高乘之，令三而一，得大方锥之积。大锥方之积合十二圆矣。今求一圆，复合十二除之，故令三乘十二，得三十六，而连除。于徽术，当下周自乘，以高乘之，又以二十五乘之，九百四十二而一。圆锥比于方锥亦二百分之一百五十七。令径自乘者，亦当以一百五十七乘之，六百而一。其说如圆亭也。

　　淳风等按：依密率，以七乘之，二百六十四而一。〕

　　今有堑堵，下广二丈，袤一十八丈六尺，高二丈五尺。问积几何？答曰：四万六千五百尺。

　　术曰：广袤相乘，以高乘之，二而一。

　　〔邪解立方，得两堑堵。虽复橢方，亦为堑堵。故二而一。此则合所规棋。

　　推其物体，盖为堑上叠也。其形如城，而无上广，与所规棋形异而同实。未闻所以名之为堑堵之说也。〕

　　今有阳马，广五尺，袤七尺，高八尺。问积几何？答曰：九十三尺少半尺。

　　术曰：广袤相乘，以高乘之，三而一。

　　〔按：此术阳马之形，方锥一隅也。今谓四柱屋隅为阳马。假令广袤各一尺，高一尺，相乘，得立方积一尺。邪解立方，得两堑堵；邪解堑堵，其一为阳马，一为鳖臑。阳马居二，鳖臑居一，不易之率也。合两鳖臑成一阳马，合三阳马而成一立方，故三而一。验之以棋，其形露矣。悉割阳马，凡为六鳖臑。观其割分，则体势互通，盖易了也。其棋或修短、或广狭、立方不等者，亦割分以为六鳖臑。

　　其形不悉相似。然见数同，积实均也。鳖臑殊形，阳马异体。然阳马异体，则不纯合。不纯合，则难为之矣。何则？按：邪解方棋以为堑堵者，必当以半为分；邪解堑堵以为阳马者，亦必当以半为分，一从一横耳。设以阳马为分内，鳖臑为分外。棋虽或随修短广狭，犹有此分常率知，殊形异体，亦同也者，以此而已。

　　其使鳖臑广、袤、高各二尺，用堑堵、鳖臑之棋各二，皆用赤棋。又使阳马之广、袤、高各二尺，用立方之棋一，堑堵、阳马之棋各二，皆用黑棋。棋之赤、黑，接为堑堵，广、袤、高各二尺。于是中攽其广、袤，又中分其高。令赤、黑堑堵各自适当一方，高一尺，方一尺，每二分鳖臑，则一阳马也。其余两端各积本体，合成一方焉。是为别种而方者率居三，通其体而方者率居一。虽方随棋改，而固有常然之势也。按：余数具而可知者有一、二分之别，则一、二之为率定矣。其于理也岂虚矣。若为数而穷之，置余广、袤、高之数，各半之，则四分之三又可知也。半之弥少，其余弥细，至细曰微，微则无形。由是言之，安取余哉？数而求穷之者，谓以情推，不用筹算。鳖臑之物，不同器用；阳马之形，或随修短广狭。然不有鳖臑，无以审阳马之数，不有阳马，无以知锥亭之数，功实之主也。〕

　　今有鳖臑，下广五尺，无袤；上袤四尺，无广；高七尺。问积几何？答曰：二十三尺少半尺。

　　术曰：广袤相乘，以高乘之，六而一。

　　〔按：此术臑者，臂节也。或曰：半阳马，其形有似鳖肘，故以名云。中破阳马，得两鳖臑。鳖臑之见数即阳马之半数。数同而实据半，故云六而一，即得。〕

　　今有羡除，下广六尺，上广一丈，深三尺；末广八尺，无深；袤七尺。问积几何？答曰：八十四尺。

　　术曰：并三广，以深乘之，又以袤乘之，六而一。

　　〔按：此术羡除，实隧道也。其所穿地，上平下邪，似两鳖臑夹一堑堵，即羡除之形。假令用此棋：上广三尺，深一尺，下广一尺；末广一尺，无深；袤一尺。下广、末广皆堑堵之广。上广者，两鳖臑与一堑堵相连之广也。以深、袤乘，得积五尺。鳖臑居二，堑堵居三，其于本棋皆一为六，故六而一。合四阳马以为方锥。邪画方锥之底，亦令为中方。就中方削而上合，全为中方锥之半。于是阳马之棋悉中解矣。中锥离而为四鳖臑焉。故外锥之半亦为四鳖臑。虽背正异形，与常所谓鳖臑参不相似，实则同也。所云夹堑堵者，中锥之鳖臑也。凡堑堵上袤短者，连阳马也。下袤短者，与鳖臑连也。上、下两袤相等知，亦与鳖臑连也。

　　并三广，以高、袤乘，六而一，皆其积也。今此羡除之广即堑堵之袤也。按：此本是三广不等，即与鳖臑连者。别而言之：中央堑堵广六尺，高三尺，袤七尺。

　　末广之两旁，各一小鳖臑，皆与堑堵等。令小鳖臑居里，大鳖臑居表，则大鳖臑皆出橢方锥：下广二尺，袤六尺，高七尺。分取其半，则为袤三尺。以高、广乘之，三而一，即半锥之积也。邪解半锥得此两大鳖臑。求其积，亦当六而一，合于常率矣。按：阳马之棋两邪，棋底方。当其方也，不问旁角而割之，相半可知也。推此上连无成不方，故方锥与阳马同实。角而割之者，相半之势。此大小鳖臑可知更相表里，但体有背正也。〕

　　今有刍甍，下广三丈，袤四丈；上袤二丈，无广；高一丈。问积几何？答曰：五千尺。

　　术曰：倍下袤，上袤从之，以广乘之，又以高乘之，六而一。

　　〔推明义理者：旧说云：“凡积刍有上下广曰童，甍，谓其屋盖之苫也。”是故甍之下广、袤与童之上广、袤等。正解方亭两边，合之即刍甍之形也。假令下广二尺，袤三尺；上袤一尺，无广；高一尺。其用棋也，中央堑堵二，两端阳马各二。倍下袤，上袤从之，为七尺。以下广乘之，得幂十四尺。阳马之幂各居二，堑堵之幂各居三。以高乘之，得积十四尺。其于本棋也，皆一而为六。故六而一，即得。亦可令上下袤差乘广，以高乘之，三而一，即四阳马也；下广乘上袤而半之，高乘之，即二堑堵；并之，以为甍积也。〕

　　刍童、曲池、盘池、冥谷皆同术。

　　术曰：倍上袤，下袤从之；亦倍下袤，上袤从之；各以其广乘之，并，以高若深乘之，皆六而一。

　　〔按：此术假令刍童上广一尺，袤二尺；下广三尺，袤四尺；高一尺。其用棋也，中央立方二，四面堑堵六，四角阳马四。倍下袤为八，上袤从之，为十，以高、广乘之，得积三十尺。是为得中央立方各三，两端堑堵各四，两旁堑堵各六，四角阳马亦各六。复倍上袤，下袤从之，为八，以高、广乘之，得积八尺。

　　是为得中央立方亦各三，两端堑堵各二。并两旁，三品棋皆一而为六。故六而一，即得。为术又可令上下广袤差相乘，以高乘之，三而一，亦四阳马；上下广袤互相乘，并，而半之，以高乘之，即四面六堑堵与二立方；并之，为刍童积。又可令上下广袤互相乘而半之，上下广袤又各自乘，并，以高乘之，三而一，即得也。〕

　　其曲池者，并上中、外周而半之，以为上袤；亦并下中、外周而半之，以为下袤。

　　〔此池环而不通匝，形如盘蛇，而曲之。亦云周者，谓如委谷依垣之周耳。

　　引而伸之，周为袤。求袤之意，环田也。〕

　　今有刍童，下广二丈，袤三丈；上广三丈，袤四丈；高三丈。问积几何？答曰：二万六千五百尺。

　　今有曲池，上中周二丈，外周四丈，广一丈；下中周一丈四尺，外周二丈四尺，广五尺；深一丈。问积几何？答曰：一千八百八十三尺三寸少半寸。

　　今有盘池，上广六丈，袤八丈；下广四丈，袤六丈，深二丈。问积几何？答曰：七万六百六十六尺太半尺。

　　负土往来七十步，其二十步上下棚除，棚除二当平道五；踟蹰之间十加一；载输之间三十步，定一返一百四十步。土笼积一尺六寸。秋程人功行五十九里半。

　　问人到积尺及用徒各几何？答曰：人到二百四尺。用徒三百四十六人一百五十三分人之六十二。

　　术曰：以一笼积尺乘程行步数，为实。往来上下棚除二当平道五。

　　〔棚，阁；除，斜道；有上下之难，故使二当五也。〕

　　置定往来步数，十加一，及载输之间三十步，以为法。除之，所得即一人所到尺。以所到约积尺，即用徒人数。

　　〔按：此术棚，阁；除，斜道；有上下之难，故使二当五。置定往来步数，十加一，及载输之间三十步，是为往来一返凡用一百四十步。于今有术为所有率，笼积一尺六寸为所求率，程行五十九里半为所有数，而今有之，即所到尺数。以所到约积尺，即用徒人数者，此一人之积除其众积尺，故得用徒人数。为术又可令往来一返所用之步约程行为返数，乘笼积为一人所到。以此术与今有术相反覆，则乘除之或先后，意各有所在而同归耳。〕

　　今有冥谷，上广二丈，袤七丈；下广八尺，袤四丈；深六丈五尺。问积几何？答曰：五万二千尺。

　　载土往来二百步，载输之间一里。程行五十八里；六人共车，车载三十四尺七寸。问人到积尺及用徒各几何？答曰：人到二百一尺五十分尺之十三。用徒二百五十八人一万六十三分人之三千七百四十六。

　　术曰：以一车积尺乘程行步数，为实。置今往来步数，加载输之间一里，以车六人乘之，为法。除之，所得即一人所到尺。以所到约积尺，即用徒人数。

　　〔按：此术今有之义。以载输及往来并得五百步，为所有率，车载三十四尺七寸为所求率，程行五十八里，通之为步，为所有数，而今有之，所得即一车所到。欲得人到者，当以六人除之，即得。术有分，故亦更令乘法而并除者，亦用以车尺数以为一人到土率，六人乘五百步为行率也。又亦可五百步为行率，令六人约车积尺数为一人到土率，以负土术入之。入之者，亦可求返数也。要取其会通而已。术恐有分，故令乘法而并除。以所到约积尺，即用徒人数者，以一人所到积尺除其众积，故得用徒人数也。〕

　　今有委粟平地，下周一十二丈，高二丈。问积及为粟几何？答曰：积八千尺。

　　〔于徽术，当积七千六百四十三尺一百五十七分尺之四十九。

　　淳风等按：依密率，为积七千六百三十六尺十一分尺之四。〕

　　为粟二千九百六十二斛二十七分斛之二十六。

　　〔于徽术，当粟二千八百三十斛一千四百一十三分斛之一千二百一十。

　　淳风等按：依密率，为粟二千八百二十八斛九十九分斛之二十八。〕

　　今有委菽依垣，下周三丈，高七尺。问积及为菽各几何？答曰：积三百五十尺。

　　〔依徽术，当积三百三十四尺四百七十一分尺之一百八十六。

　　淳风等按：依密率，为积三百三十四尺十一分尺之一。〕

　　为菽一百四十四斛二百四十三分斛之八。

　　〔依徽术，当菽一百三十七斛一万二千七百一十七分斛之七千七百七十一。

　　淳风等按：依密率，为菽一百三十七斛八百九十一分斛之四百三十三。〕

　　今有委米依垣内角，下周八尺，高五尺。问积及为米各几何？答曰：积三十五尺九分尺之五。

　　〔于徽术，当积三十三尺四百七十一分尺之四百五十七。

　　淳风等按：依密率，当积三十三尺三十三分尺之三十一。〕

　　为米二十一斛七百二十九分斛之六百九十一。

　　〔于徽术，当米二十斛三万八千一百五十一分斛之三万六千九百八十。

　　淳风等按：依密率，为米二十斛二千六百七十三分斛之二千五百四十。〕

　　委粟术曰：下周自乘，以高乘之，三十六而一。

　　〔此犹圆锥也。于徽术，亦当下周自乘，以高乘之，又以二十五乘之，九百四十二而一也。〕

　　其依垣者，〔居圆锥之半也。〕

　　十八而一。

　　〔于徽术，当令此下周自乘，以高乘之，又以二十五乘之，四百七十一而一。

　　依垣之周，半于全周。其自乘之幂居全周自乘之幂四分之一，故半全周之法以为法也。〕

　　其依垣内角者，〔角，隅也，居圆锥四分之一也。〕

　　九而一。

　　〔于徽术，当令此下周自乘，而倍之，以高乘之，又以二十五乘之，四百七十一而一。依隅之周，半于依垣。其自乘之幂居依垣自乘之幂四分之一，当半依垣之法以为法。法不可半，故倍其实。又此术亦用周三径一之率。假令以三除周，得径；若不尽，通分内子，即为径之积分。令自乘，以高乘之，为三方锥之积分。

　　母自相乘得九，为法，又当三而一，得方锥之积。从方锥中求圆锥之积，亦犹方幂求圆幂。乃当三乘之，四而一，得圆锥之积。前求方锥积，乃以三而一；今求圆锥之积，复合三乘之。二母既同，故相准折。惟以四乘分母九，得三十六而连除，圆锥之积。其圆锥之积与平地聚粟同，故三十六而一。

　　淳风等按：依密率，以七乘之，其平地者，二百六十四而一；依垣者，一百三十二而一；依隅者，六十六而一也。〕

　　程粟一斛积二尺七寸；〔二尺七寸者，谓方一尺，深二尺七寸，凡积二千七百寸。〕

　　其米一斛积一尺六寸五分寸之一；〔谓积一千六百二十寸。〕

　　其菽、荅、麻、麦一斛皆二尺四寸十分寸之三。

　　〔谓积二千四百三十寸。此为以精粗为率，而不等其概也。粟率五，米率三，故米一斛于粟一斛，五分之三；菽、荅、麻、麦亦如本率云。故谓此三量器为概，而皆不合于今斛。当今大司农斛，圆径一尺三寸五分五厘，正深一尺，于徽术，为积一千四百四十一寸，排成余分，又有十分寸之三。王莽铜斛于今尺为深九寸五分五厘，径一尺三寸六分八厘七毫。以徽术计之，于今斛为容九斗七升四合有奇。《周官考工记》：朅氏为量，深一尺，内方一尺而圆外，其实一釜。于徽术，此圆积一千五百七十寸。《左氏传》曰：“齐旧四量：豆、区、釜、钟。四升曰豆，各自其四，以登于釜。釜十则钟。”钟六斛四斗。釜六斗四升，方一尺，深一尺，其积一千寸。若此方积容六斗四升，则通外圆积成旁，容十斗四合一龠五分龠之三也。以数相乘之，则斛之制：方一尺而圆其外，庣旁一厘七毫，幂一百五十六寸四分寸之一，深一尺，积一千五百六十二寸半，容十斗。王莽铜斛与《汉书律历志》所论斛同。〕

　　今有仓，广三丈，袤四丈五尺，容粟一万斛。问高几何？答曰：二丈。

　　术曰：置粟一万斛积尺为实。广、袤相乘为法。实如法而一，得高尺。

　　〔以广袤之幂除积，故得高。按：此术本以广袤相乘，以高乘之，得此积。

　　今还元，置此广袤相乘为法，除之，故得高也。〕

　　今有圆囷，〔圆囷，廪也，亦云圆囤也。〕

　　高一丈三尺三寸少半寸，容米二千斛。问周几何？答曰：五丈四尺。

　　〔于徽术，当周五丈五尺二寸二十分寸之九。

　　淳风等按：依密率，为周五丈五尺一百分尺之二十七。〕

　　术曰：置米积尺，〔此积犹圆堡昪之积。〕

　　以十二乘之，令高而一。所得，开方除之，即周。

　　〔于徽术，当置米积尺，以三百一十四乘之，为实。二十五乘囷高为法。所得，开方除之，即周也。此亦据见幂以求周，失之于微少也。晋武库中有汉时王莽所作铜斛，其篆书字题斛旁云：律嘉量斛，方一尺而圆其外，庣旁九厘五毫，幂一百六十二寸；深一尺，积一千六百二十寸，容十斗。及斛底云：律嘉量斗，方尺而圆其外，庣旁九厘五毫，幂一尺六寸二分。深一寸，积一百六十二寸，容一斗。合、龠皆有文字。升居斛旁，合、龠在斛耳上。后有赞文，与今律历志同，亦魏晋所常用。今粗疏王莽铜斛文字、尺、寸、分数，然不尽得升、合、勺之文字。按：此术本周自相乘，以高乘之，十二而一，得此积。今还元，置此积，以十二乘之，令高而一，即复本周自乘之数。凡物自乘，开方除之，复其本数。故开方除之，即得也。

　　淳风等按：依密率，以八十八乘之，为实。七乘囷高为法。实如法而一。开方除之，即周也。〕

　　卷六

　　○均输（以御远近劳费）

　　今有均输粟，甲县一万户，行道八日；乙县九千五百户，行道十日；丙县一万二千三百五十户，行道十三日；丁县一万二千二百户，行道二十日，各到输所。

　　凡四县赋当输二十五万斛，用车一万乘。欲以道里远近、户数多少衰出之，问粟、车各几何？答曰：甲县粟八万三千一百斛，车三千三百二十四乘。乙县粟六万三千一百七十五斛，车二千五百二十七乘。丙县粟六万三千一百七十五斛，车二千五百二十七乘。丁县粟四万五百五十斛，车一千六百二十二乘。

　　术曰：令县户数各如其本行道日数而一，以为衰。

　　〔按：此均输，犹均运也。令户率出车，以行道日数为均，发粟为输。据甲行道八日，因使八户共出一车；乙行道十日，因使十户共出一车。计其在道，则皆户一日出一车，故可为均平之率也。

　　淳风等按：县户有多少之差，行道有远近之异。欲其均等，故各令行道日数约户为衰。行道多者少其户，行道少者多其户。故各令约户为衰。以八日约除甲县，得一百二十五，乙、丙各九十五，丁六十一。于今有术，副并为所有率。未并者各为所求率，以赋粟车数为所有数，而今有之，各得车数。一旬除乙，十三除丙，各得九十五；二旬除丁，得六十一也。〕

　　甲衰一百二十五，乙、丙衰各九十五，丁衰六十一，副并为法。以赋粟车数乘未并者，各自为实。

　　〔衰，分科率。〕

　　实如法得一车。

　　〔各置所当出车，以其行道日数乘之，如户数而一，得率：户用车二日四十七分日之三十一，故谓之均。求此户以率，当各计车之衰分也。〕

　　有分者，上下辈之。

　　〔辈，配也。车、牛、人之数不可分裂，推少就多，均赋之宜。今按：甲分既少，宜从于乙。满法除之，有余从丙。丁分又少，亦宜就丙。除之适尽。加乙、丙各一，上下辈益，以少从多也。〕

　　以二十五斛乘车数，即粟数。

　　今有均输卒：甲县一千二百人，薄塞；乙县一千五百五十人，行道一日；丙县一千二百八十人，行道二日；丁县九百九十人，行道三日；戊县一千七百五十人，行道五日。凡五县赋输卒一月一千二百人。欲以远近、人数多少衰出之，问县各几何？答曰：甲县二百二十九人。乙县二百八十六人。丙县二百二十八人。

　　丁县一百七十一人。戊县二百八十六人。

　　术曰：令县卒各如其居所及行道日数而一，以为衰。

　　〔按：此亦以日数为均，发卒为输。甲无行道日，但以居所三十日为率。言欲为均平之率者，当使甲三十人而出一人，乙三十一人而出一人。出一人者，计役则皆一人一日，是以可为均平之率。〕

　　甲衰四，乙衰五，丙衰四，丁衰三，戊衰五，副并为法。以人数乘未并者各自为实。实如法而一。

　　〔为衰，于今有术，副并为所有率，未并者各为所求率，以赋卒人数为所有数。此术以别，考则意同，以广异闻，故存之也。各置所当出人数，以其居所及行道日数乘之，如县人数而一。得率：人役五日七分日之五。〕

　　有分者，上下辈之。

　　〔辈，配也。今按：丁分最少，宜就戊除。不从乙者，丁近戊故也。满法除之，有余从乙。丙分又少，亦就乙除，有余从甲。除之适尽。从甲、丙二分，其数正等，二者于乙远近皆同，不以甲从乙者，方以下从上也。〕

　　今有均赋粟：甲县二万五百二十户，粟一斛二十钱，自输其县；乙县一万二千三百一十二户，粟一斛一十钱，至输所二百里；丙县七千一百八十二户，粟一斛一十二钱，至输所一百五十里；丁县一万三千三百三十八户，粟一斛一十七钱，至输所二百五十里；戊县五千一百三十户，粟一斛一十三钱，至输所一百五十里。

　　凡五县赋输粟一万斛。一车载二十五斛，与僦一里一钱。欲以县户赋粟，令费劳等，问县各粟几何？答曰：甲县三千五百七十一斛二千八百七十三分斛之五百一十七。乙县二千三百八十斛二千八百七十三分斛之二千二百六十。丙县一千三百八十八斛二千八百七十三分斛之二千二百七十六。丁县一千七百一十九斛二千八百七十三分斛之一千三百一十三。戊县九百三十九斛二千八百七十三分斛之二千二百五十三。

　　术曰：以一里僦价乘至输所里，〔此以出钱为均也。问者曰：“一车载二十五斛，与僦一里一钱。”一钱，即一里僦价也。以乘里数者，欲知僦一车到输所所用钱也。甲自输其县，则无取僦价也。〕

　　以一车二十五斛除之，〔欲知僦一斛所用钱。〕

　　加一斛粟价，则致一斛之费。

　　〔加一斛之价于一斛僦直，即凡输粟取僦钱也：甲一斛之费二十，乙、丙各十八，丁二十七，戊十九也。〕

　　各以约其户数，为衰。

　　〔言使甲二十户共出一斛，乙、丙十八户共出一斛。计其所费，则皆户一钱，故可为均赋之率也。计经赋之率，既有户算之率，亦有远近、贵贱之率。此二率者，各自相与通。通则甲二十，乙十二，丙七，丁十三，戊五。一斛之费谓之钱率。钱率约户率者，则钱为母，户为子。子不齐，令母互乘为齐，则衰也。若其不然。以一斛之费约户数，取衰。并有分，当通分内子，约之，于算甚繁。此一章皆相与通功共率，略相依似。以上二率、下一率亦可放此，从其简易而已。又以分言之，使甲一户出二十分斛之一，乙一户出十八分斛之一，各以户数乘之，亦可得一县凡所当输，俱为衰也。乘之者，乘其子，母报除之。以此观之，则以一斛之费约户数者，其意不异矣。然则可置一斛之费而反衰之。约户，以乘户率为衰也。合分注曰：“母除为率，率乘子为齐。”反衰注曰：“先同其母，各以分母约，其子为反衰。”以施其率，为算既约，且不妨处下也。〕

　　甲衰一千二十六，乙衰六百八十四，丙衰三百九十九，丁衰四百九十四，戊衰二百七十，副并为法。所赋粟乘未并者，各自为实。实如法得一。

　　〔各置所当出粟，以其一斛之费乘之，如户数而一，得率：户出三钱二千八百七十三分钱之一千三百八十一。按：此以出钱为均。问者曰：“一车载二十五斛，与僦一里一钱。”一钱即一里僦价也。以乘里数者，欲知僦一车到输所用钱。

　　甲自输其县，则无取僦之价。以一车二十五斛除之者，欲知僦一斛所用钱。加一斛之价于一斛僦直，即凡输粟取僦钱：甲一斛之费二十，乙、丙各十八，丁二十七，戊一十九。各以约其户，为衰：甲衰一千二十六，乙衰六百八十四，丙衰三百九十九，丁衰四百九十四，戊衰二百七十。言使甲二十户共出一斛，乙、丙十八户共出一斛。计其所费，则皆户一钱，故可为均赋之率也。于今有术，副并为所有率，未并者各为所求率，赋粟一万斛为所有数。此今有、衰分之义也。〕

　　今有均赋粟：甲县四万二千算，粟一斛二十，自输其县；乙县三万四千二百七十二算，粟一斛一十八，佣价一日一十钱，到输所七十里；丙县一万九千三百二十八算，粟一斛一十六，佣价一日五钱，到输所一百四十里；丁县一万七千七百算，粟一斛一十四，佣价一日五钱，到输所一百七十五里；戊县二万三千四十算，粟一斛一十二，佣价一日五钱，到输所二百一十里；己县一万九千一百三十六算，粟一斛一十，佣价一日五钱，到输所二百八十里。凡六县赋粟六万斛，皆输甲县。六人共车，车载二十五斛，重车日行五十里，空车日行七十里，载输之间各一日。粟有贵贱，佣各别价，以算出钱，令费劳等，问县各粟几何？答曰：甲县一万八千九百四十七斛一百三十三分斛之四十九。乙县一万八百二十七斛一百三十三分斛之九，丙县七千二百一十八斛一百三十三分斛之六。丁县六千七百六十六斛一百三十三分斛之一百二十二。戊县九千二十二斛一百三十三分斛之七十四。己县七千二百一十八斛一百三十三分斛之六。

　　术曰：以车程行空、重相乘为法，并空、重，以乘道里，各自为实，实如法得一日。

　　〔按：此术重往空还，一输再行道也。置空行一里用七十分日之一，重行一里用五十分日之一。齐而同之，空、重行一里之路，往返用一百七十五分日之六。

　　完言之者，一百七十五里之路，往返用六日也。故并空、重者，齐其子也；空、重相乘者，同其母也。于今有术，至输所里为所有数，六为所求率，一百七十五为所有率，而今有之，即各得输所用日也。〕

　　加载输各一日，〔故得凡日也。〕

　　而以六人乘之，〔欲知致一车用人也。〕

　　又以佣价乘之，〔欲知致车人佣直几钱。〕

　　以二十五斛除之，〔欲知致一斛之佣直也。〕

　　加一斛粟价，即致一斛之费。

　　〔加一斛之价于致一斛之佣直，即凡输一斛粟取佣所用钱。〕

　　各以约其算数为衰，〔今按：甲衰四十二，乙衰二十四，丙衰十六，丁衰十五，戊衰二十，己衰十六。于今有术，副并为所有率，未并者各自为所求率，所赋粟为所有数。此今有、衰分之义也。〕

　　副并为法，以所赋粟乘未并者，各自为实。实如法得一斛。

　　〔各置所当出粟，以其一斛之费乘之，如算数而一，得率：算出九钱一百三十三分钱之三。又载输之间各一日者，即二日也。〕

　　今有粟七斗，三人分舂之，一人为粝米，一人为粺米，一人为米，令米数等。问取粟、为米各几何？答曰：粝米取粟二斗一百二十一分斗之一十。

　　粺米取粟二斗一百二十一分斗之三十八。米取粟二斗一百二十一分斗之七十三。为米各一斗六百五分斗之一百五十一。

　　术曰：列置粝米三十，粺米二十七，米二十四，而反衰之。

　　〔此先约三率：粝为十，粺为九，为八。欲令米等者，其取粟：粝率十分之一，粺率九分之一，率八分之一。当齐其子，故曰反衰也。

　　淳风等按：米有精粗之异，粟有多少之差。据率，粺、少而粝多；用粟，则粺、多而粝少。米若依本率之分，粟当倍率，故今反衰之，使精取多而粗得少。〕

　　副并为法。以七斗乘未并者，各自为取粟实。实如法得一斗。

　　〔于今有术，副并为所有率，未并者各为所求率，粟七斗为所有数，而今有之，故各得取粟也。〕

　　若求米等者，以本率各乘定所取粟为实，以粟率五十为法，实如法得一斗。

　　〔若径求为米等数者，置粝米三，用粟五；粺米二十七，用粟五十；米十二，用粟二十五。齐其粟，同其米，并齐为法。以七斗乘同为实。所得，即为米斗数。〕

　　今有人当禀粟二斛。仓无粟，欲与米一、菽二，以当所禀粟。问各几何？答曰；米五斗一升七分升之三。菽一斛二升七分升之六。

　　术曰：置米一、菽二，求为粟之数。并之，得三、九分之八，以为法。亦置米一、菽二，而以粟二斛乘之，各自为实。实如法得一斛。

　　〔淳风等按：置粟率五，乘米一，米率三除之，得一、三分之二，即是米一之粟也；粟率十，以乘菽二，菽率九除之，得二、九分之二，即是菽二之粟也。

　　并全，得三。齐子，并之，得二十四；同母，得二十七；约之，得九分之八。故云“并之，得三、九分之八”。米一、菽二当粟三、九分之八，此其粟率也。于今有术，米一、菽二皆为所求率，当粟三、九分之八，为所有率，粟二斛为所有数。凡言率者，当相与。通之，则为米九、菽十八，当粟三十五也。亦有置米一、菽二，求其为粟之率，以为列衰。副并为法，以粟乘列衰为实。所得即米一、菽二所求粟也。以米、菽本率而今有之，即合所问。〕

　　今有取佣，负盐二斛，行一百里，与钱四十。今负盐一斛七斗三升少半升，行八十里。问与钱几何？答曰：二十七钱一十五分钱之一十一。

　　术曰：置盐二斛升数，以一百里乘之为法。

　　〔按：此术以负盐二斛升数乘所行一百里，得二万里。是为负盐一升行二万里，得钱四十。于今有术，为所有率。〕

　　以四十钱乘今负盐升数，又以八十里乘之，为实。实如法得一钱。

　　〔以今负盐升数乘所行里，今负盐一升凡所行里也。于今有术以所有数，四十钱为所求率也。衰分章“贷人千钱”与此同。〕

　　今有负笼重一石，行百步，五十返。今负笼重一石一十七斤，行七十六步，问返几何？答曰：五十七返二千六百三分返之一千六百二十九。

　　术曰：以今所行步数乘今笼重斤数，为法。

　　〔此法谓负一斤一返所行之积步也。〕

　　故笼重斤数乘故步，又以返数乘之，为实。实如法得一返。

　　〔按：此法，负一斤一返所行之积步；此实者一斤一日所行之积步。故以一返之课除终日之程，即是返数也。

　　淳风等按：此术，所行步多者得返少，所行步少者得返多。然则故所行者今返率也。故令所得返乘今返之率，为实，而以故返之率为法，今有术也。按：此负笼又有轻重，于是为术者因令重者得返少，轻者得返多。故又因其率以乘法、实者，重今有之义也。然此意非也。按：此笼虽轻而行有限，笼过重则人力遗。

　　力有遗而术无穷，人行有限而笼轻重不等。使其有限之力随彼无穷之变，故知此术率乖理也。若故所行有空行返数，设以问者，当因其所负以为返率，则今返之数可得而知也。假令空行一日六十里，负重一斛行四十里。减重一斗进二里半，负重二斗以下与空行同。今负笼重六斗，往返行一百步，问返几何？答曰：一百五十返。术曰：置重行率，加十里，以里法通之，为实。以一返之步为法。实如法而一，即得也。〕

　　今有程传委输，空车日行七十里，重车日行五十里。今载太仓粟输上林，五日三返，问太仓去上林几何？答曰：四十八里一十八分里之一十一术曰：并空、重里数，以三返乘之，为法。令空、重相乘，又以五日乘之，为实。实如法得一里。

　　〔此亦如上术。率：一百七十五里之路，往返用六日也。于今有术，则五日为所有数，一百七十五里为所求率，六日为所有率。以此所得，则三返之路。今求一返，当以三约之，因令乘法而并除也。为术亦可各置空、重行一里用日之率，以为列衰，副并为法。以五日乘列衰为实。实如法，所得即各空、重行日数也。

　　各以一日所行以乘，为凡日所行。三返约之，为上林去太仓之数。按：此术重往空还，一输再还道。置空行一里用七十分日之一，重行一里用五十分日之一。齐而同之，空、重行一里之路，往返用一百七十五分日之六。完言之者，一百七十五里之路，往返用六日。故并空、重者，并齐也；空、重相乘者，同其母也。于今有术，五日为所有数，一百七十五为所求率，六为所有率。以此所得，则三返之路。今求一返者，当以三约之。故令乘法而并除，亦当约之也。〕

　　今有络丝一斤为练丝一十二两，练丝一斤为青丝一斤一十二铢。今有青丝一斤，问本络丝几何？答曰：一斤四两一十六铢三十三分铢之一十六。

　　术曰：以练丝十二两乘青丝一斤一十二铢为法。以青丝一斤铢数乘练丝一斤两数，又以络丝一斤乘，为实。实如法得一斤。

　　〔按：练丝一斤为青丝一斤十二铢，此练率三百八十四，青率三百九十六也。

　　又络丝一斤为练丝十二两，此络率十六，练率十二也。置今有青丝一斤，以练率三百八十四乘之，为实。实如青丝率三百九十六而一。所得，青丝一斤，练丝之数也。又以络率十六乘之，所得为实；以练率十二为法。所得，即练丝用络丝之数也。是谓重今有也。虽各有率，不问中间。故令后实乘前实，后法乘前法而并除也。故以练丝两数为实，青丝铢数为法。一曰：又置络丝一斤两数与练丝十二两，约之，络得四，练得三。此其相与之率。又置练丝一斤铢数与青丝一斤一十二铢，约之，练得三十二，青得三十三。亦其相与之率。齐其青丝、络丝，同其二练，络得一百二十八，青得九十九，练得九十六，即三率悉通矣。今有青丝一斤为所有数，络丝一百二十八为所求率，青丝九十九为所有率。为率之意犹此，但不先约诸率耳。凡率错互不通者，皆积齐同用之。放此，虽四五转不异也。言同其二练者，以明三率之相与通耳，于术无以异也。又一术：今有青丝一斤铢数乘练丝一斤两数，为实；以青丝一斤一十二铢为法。所得，即用练丝两数。以络丝一斤乘所得为实，以练丝十二两为法，所得，即用络丝斤数也。〕

　　今有恶粟二十斗，舂之，得粝米九斗。今欲求粺米一十斗，问恶粟几何？答曰：二十四斗六升八十一分升之七十四。

　　术曰：置粝米九斗，以九乘之，为法。亦置粺米十斗，以十乘之，又以恶粟二十斗乘之，为实。实如法得一斗。

　　〔按：此术置今有求粺米十斗，以粝米率十乘之，如粺率九而一，即粺化为粝，又以恶粟率二十乘之，如粝率九而一，即粝亦化为恶粟矣。此亦重今有之义。为术之意犹络丝也。虽各有率，不问中间。故令后实乘前实，后法乘前法而并除之也。〕

　　今有善行者行一百步，不善行者行六十步。今不善行者先行一百步，善行者追之。问几何步及之？答曰：二百五十步。

　　术曰：置善行者一百步，减不善行者六十步，余四十步，以为法。以善行者之一百步乘不善行者先行一百步，为实。实如法得一步。

　　〔按：此术以六十步减一百步，余四十步，即不善行者先行率也；善行者行一百步，追及率。约之，追及率得五，先行率得二。于今有术，不善行者先行一百步为所有数，五为所求率，二为所有率，而今有之，得追及步也。〕

　　今有不善行者先行一十里，善行者追之一百里，先至不善行者二十里。问善行者几何里及之？答曰：三十三里少半里。

　　术曰：置不善行者先行一十里，以善行者先至二十里增之，以为法。以不善行者先行一十里乘善行者一百里，为实。实如法得一里。

　　〔按：此术不善行者既先行一十里，后不及二十里，并之，得三十里也，谓之先行率。善行者一百里为追及率。约之，先行率得三，三为所有率，而今有之，即得也。其意如上术也。〕

　　今有兔先走一百步，犬追之二百五十步，不及三十步而止。问犬不止，复行几何步及之？答曰：一百七步七分步之一。

　　术曰：置兔先走一百步，以犬走不及三十步减之，余为法。以不及三十步乘犬追步数为实。实如法得一步。

　　〔按：此术以不及三十步减先走一百步，余七十步，为兔先走率。犬行二百五十步为追及率。约之，先走率得七，追及率得二十五。于今有术，不及三十步为所有数，二十五为所求率，七为所有率，而今有之，即得也。〕

　　今有人持金十二斤出关，关税之，十分而取一。今关取金二斤，偿钱五千。

　　问金一斤值钱几何？答曰：六千二百五十。

　　术曰：以一十乘二斤，以十二斤减之，余为法。以一十乘五千为实。实如法得一钱。

　　〔按：此术置十二斤，以一乘之，十而一，得一斤五分斤之一，即所当税者也。减二斤，余即关取盈金。以盈除所偿钱，即金值也。今术既以十二斤为所税，则是以十为母，故以十乘二斤及所偿钱，通其率。于今有术，五千钱为所有数，十为所求率，八为所有率，而今有之，即得也。〕

　　今有客马，日行三百里。客去忘持衣。日已三分之一，主人乃觉。持衣追及，与之而还；至家视日四分之三。问主人马不休，日行几何？答曰：七百八十里。

　　术曰：置四分日之三，除三分日之一，〔按：此术“置四分日之三，除三分日之一”者，除，其减也。减之余，有十二分之五，即是主人追客还用日率也。〕

　　半其余，以为法。

　　〔去其还，存其往。率之者，子不可半，故倍母，二十四分之五。是为主人与客均行用日之率也。〕

　　副置法，增三分日之一。

　　〔法二十四分之五者，主人往追用日之分也。三分之一者，客去主人未觉之前独行用日之分也。并连此数，得二十四分日之十三，则主人追及前用日之分也。

　　是为客用日率也。然则主人用日率者，客马行率也；客用日率者，主人马行率也。

　　母同则子齐，是为客马行率五，主人马行率十三。于今有术，三百里为所有数，十三为所求率，五为所有率，而今有之，即得也。〕

　　以三百里乘之，为实。实如法，得主人马一日行。

　　〔欲知主人追客所行里者，以三百里乘客用日分子十三，以母二十四而一，得一百六十二里半。以此乘客马与主人均行日分母二十四，如客马与主人均行用日分子五而一，亦得主人马一日行七百八十里也。〕

　　今有金棰，长五尺，斩本一尺，重四斤；斩末一尺，重二斤。问次一尺各重几何？答曰：末一尺重二斤。次一尺重二斤八两。次一尺重三斤。次一尺重三斤八两。次一尺重四斤。

　　术曰：令末重减本重，余，即差率也。又置本重，以四间乘之，为下第一衰。

　　副置，以差率减之，每尺各自为衰。

　　〔按：此术五尺有四间者，有四差也。今本末相减，余即四差之凡数也。以四约之，即得每尺之差。以差数减本重，余即次尺之重也。为术所置，如是而已。

　　今此率以四为母，故令母乘本为衰，通其率也。亦可置末重，以四间乘之，为上第一衰。以差重率加之，为次下衰也。〕

　　副置下第一衰，以为法。以本重四斤遍乘列衰，各自为实。实如法得一斤。

　　〔以下第一衰为法，以本重乘其分母之数，而又反此率乘本重，为实。一乘一除，势无损益，故惟本存焉。众衰相推为率，则其余可知也。亦可副置末衰为法，而以末重二斤乘列衰为实。此虽迂回，然是其旧。故就新而言之也。〕

　　今有五人分五钱，令上二人所得与下三人等，问各得几何？答曰：甲得一钱六分钱之二。乙得一钱六分钱之一。丙得一钱。丁得六分钱之五。戊得六分钱之四。

　　术曰：置钱，锥行衰。

　　〔按：此术“锥行”者，谓如立锥：初一、次二、次三、次四、次五，各均，为一列者也。〕

　　并上二人为九，并下三人为六。六少于九，三。

　　〔数不得等，但以五、四、三、二、一为率也。〕

　　以三均加焉，副并为法。以所分钱乘未并者，各自为实。实如法得一钱。

　　〔此问者，令上二人与下三人等，上、下部差一人，其差三。均加上部，则得二三；均加下部，则得三三。下部犹差一人，差得三，以通于本率，即上、下部等也。于今有术，副并为所有率，未并者各为所求率，五钱为所有数，而今有之，即得等耳。假令七人分七钱，欲令上二人与下五人等，则上、下部差三人。

　　并上部为十三，下部为十五。下多上少，下不足减上。当以上、下部列差而后均减，乃合所问耳。此可仿下术：令上二人分二钱半为上率，令下三人分二钱半为下率。上、下二率以少减多，余为实。置二人、三人，各半之，减五人，余为法。

　　实如法得一钱，即衰相去也。下衰率六分之五者，丁所得钱数也。〕

　　今有竹九节，下三节容四升，上四节容三升。问中间二节欲均容，各多少？答曰：下初一升六十六分升之二十九。次一升六十六分升之二十二。次一升六十六分升之一十五。次一升六十六分升之八。次一升六十六分升之一。次六十六分升之六十。次六十六分升之五十三。次六十六分升之四十六。次六十六分升之三十九。

　　术曰：以下三节分四升为下率，以上四节分三升为上率。

　　〔此二率者，各其平率也。〕

　　上、下率以少减多，余为实。

　　〔按：此上、下节各分所容为率者，各其平率。上、下以少减多者，余为中间五节半之凡差，故以为实也。〕

　　置四节、三节，各半之，以减九节，余为法。实如法得一升。即衰相去也。

　　〔按此术法者，上下节所容已定之节，中间相去节数也；实者，中间五节半之凡差也。故实如法而一，则每节之差也。〕

　　下率一升少半升者，下第二节容也。

　　〔一升少半升者，下三节通分四升之平率。平率即为中分节之容也。〕

　　今有凫起南海，七日至北海；雁起北海，九日至南海。今凫、雁俱起，问何日相逢？答曰：三日十六分日之十五。

　　术曰：并日数为法，日数相乘为实，实如法得一日。

　　〔按：此术置凫七日一至，雁九日一至。齐其至，同其日，定六十三日凫九至，雁七至。今凫、雁俱起而问相逢者，是为共至。并齐以除同，即得相逢日。

　　故“并日数为法”者，并齐之意；“日数相乘为实”者，犹以同为实也。一曰：凫飞日行七分至之一，雁飞日行九分至之一。齐而同之，凫飞定日行六十三分至之九，雁飞定日行六十三分至之七。是为南北海相去六十三分，凫日行九分，雁日行七分也。并凫、雁一日所行，以除南北相去，而得相逢日也。〕

　　今有甲发长安，五日至齐；乙发齐，七日至长安。今乙发已先二日，甲乃发长安，问几何日相逢？答曰：二日十二分日之一。

　　术曰：并五日、七日，以为法。

　　〔按：此术“并五日、七日为法”者，犹并齐为法。置甲五日一至，乙七日一至。齐而同之，定三十五日甲七至，乙五至。并之为十二至者，用三十五日也。

　　谓甲、乙与发之率耳。然则日化为至，当除日，故以为法也。〕

　　以乙先发二日减七日，〔“减七日”者，言甲、乙俱发，今以发为始发之端，于本道里则余分也。〕

　　也。

　　余，以乘甲日数为实。

　　〔七者，长安去齐之率也；五者，后发相去之率也。今问后发，故舍七用五。

　　以乘甲五日，为二十五日。言甲七至，乙五至，更相去，用此二十五日也。

　　实如法得一日。

　　〔一日甲行五分至之一，乙行七分至之一。齐而同之，甲定日行三十五分至之七，乙定日行三十五分至之五。是为齐去长安三十五分，甲日行七分，乙日行五分也。今乙先行发二日，已行十分，余，相去二十五分。故减乙二日，余，令相乘，为二十五分。〕

　　今有一人一日为牝瓦三十八枚，一人一日为牡瓦七十六枚。今令一人一日作瓦，牝、牡相半，问成瓦几何？答曰：二十五枚少半枚。

　　术曰：并牝、牡为法，牝、牡相乘为实，实如法得一枚。

　　〔此意亦与凫雁同术。牝、牡瓦相并，犹如凫、雁日飞相并也。按：此术“并牝、牡为法”者，并齐之意；“牝、牡相乘为实”者，犹以同为实也。故实如法，即得也。〕

　　今有一人一日矫矢五十，一人一日羽矢三十，一人一日摐矢十五。今令一人一日自矫、羽、摐，问成矢几何？答曰：八矢少半矢。

　　术曰：矫矢五十，用徒一人；羽矢五十，用徒一人太半人；摐矢五十，用徒三人少半人。并之，得六人，以为法。以五十矢为实。实如法得一矢。

　　〔按：此术言成矢五十，用徒六人，一日工也。此同工其作，犹凫、雁共至之类，亦以同为实，并齐为法。可令矢互乘一人为齐，矢相乘为同。今先令同于五十矢。矢同则徒齐，其归一也。——以此术为凫雁者，当雁飞九日而一至，凫飞九日而一至七分至之二。并之，得二至七分至之二，以为法。以九日为实。——实如法而一，得一人日成矢之数也。〕

　　今有假田，初假之岁三亩一钱，明年四亩一钱，后年五亩一钱。凡三岁得一百。问田几何？答曰：一顷二十七亩四十七分亩之三十一。

　　术曰：置亩数及钱数。令亩数互乘钱数，并，以为法。亩数相乘，又以百钱乘之，为实。实如法得一亩。

　　〔按：此术令亩互乘钱者，齐其钱；亩数相乘者，同其亩。同于六十，则初假之岁得钱二十，明年得钱十五，后年得钱十二也。凡三岁得钱一百，为所有数，同亩为所求率，四十七钱为所有率，今有之，即得也。齐其钱，同其亩，亦如凫雁术也。于今有术，百钱为所有数，同亩为所求率，并齐为所有率。

　　淳风等按：假田六十亩，初岁得钱二十，明年得钱十五，后年得钱十二。

　　并之，得钱四十七。是为得田六十亩，三岁所假。于今有术，百钱为所有数，六十亩为所求率，四十七为所有率，而今有之，即合问也。〕

　　今有程耕，一人一日发七亩，一人一日耕三亩，一人一日耰种五亩。今令一人一日自发、耕、耰种之，问治田几何？答曰：一亩一百一十四步七十一分步之六十六。

　　术曰：置发、耕、耰亩数，令互乘人数，并，以为法。亩数相乘为实。实如法得一亩。

　　〔此犹凫雁术也。

　　淳风等按：此术亦发、耕、耰种亩数互乘人者，齐其人；亩数相乘者，同其亩。故并齐为法，以同为实。计田一百五亩，发用十五人，耕用三十五人，种用二十一人。并之，得七十一工。治得一百五亩，故以为实。而一人一日所治，故以人数为法除之，即得也。〕

　　今有池，五渠注之。其一渠开之，少半日一满，次一日一满，次二日半一满，次三日一满，次五日一满。今皆决之，问几何日满池？答曰：七十四分日之十五。

　　术曰：各置渠一日满池之数，并，以为法。

　　〔按：此术其一渠少半日满者，是一日三满也；次一日一满；次二日半满者，是一日五分满之二也；次三日满者，是一日三分满之一也；次五日满者，是一日五分满之一也。并之，得四满十五分满之十四也。〕

　　以一日为实，实如法得一日。

　　〔此犹矫矢之术也。先令同于一日，日同则满齐。自凫雁至此，其为同齐有二术焉，可随率宜也。〕

　　其一术：各置日数及满数。

　　〔其一渠少半日满者，是一日三满也；次一日一满；次二日半满者，是五日二满；次三日一满，次五日一满。此谓之列置日数及满数也。〕

　　令日互相乘满，并，以为法。日数相乘为实。实如法得一日。

　　〔亦如凫雁术也。按：此其一渠少半日满池者，是一日三满池也；次一日一满；次二日半满者，是五日再满；次三日一满；次五日一满。此谓列置日数于右行，及满数于左行。以日互乘满者，齐其满；日数相乘者，同其日。满齐而日同，故并齐以除同，即得也。〕

　　今有人持米出三关，外关三而取一，中关五而取一，内关七而取一，余米五斗。问本持米几何？答曰：十斗九升八分升之三。

　　术曰：置米五斗，以所税者三之，五之，七之，为实。以余不税者二、四、六相互乘为法。实如法得一斗。

　　〔此亦重今有也。所税者，谓今所当税之。定三、五、七皆为所求率，二、四、六皆为所有率。置今有余米五斗，以七乘之，六而一，即内关未税之本米也。

　　又以五乘之，四而一，即中关未税之本米也。又以三乘之，二而一，即外关未税之本米也。今从末求本，不问中间，故令中率转相乘而同之，亦如络丝术。

　　又一术：外关三而取一，则其余本米三分之二也。求外关所税之余，则当置一，二分乘之，三而一。欲知中关，以四乘之，五而一。欲知内关，以六乘之，七而一。凡余分者，乘其母、子：以三、五、七相乘得一百五，为分母；二、四、六相乘，得四十八，为分子。约而言之，则是余米于本所持三十五分之十六也。

　　于今有术，余米五斗为所有数，分母三十五为所求率，分子十六为所有率也。〕

　　今有人持金出五关，前关二而税一，次关三而税一，次关四而税一，次关五而税一，次关六而税一。并五关所税，适重一斤。问本持金几何？答曰：一斤三两四铢五分铢之四。

　　术曰：置一斤，通所税者以乘之，为实。亦通其不税者，以减所通，余为法。

　　实如法得一斤。

　　〔此意犹上术也。“置一斤，通所税者”，谓令二、三、四、五、六相乘，为分母，七百二十也。“通其所不税者”，谓令所税之余一、二、三、四、五相乘，为分子，一百二十也。约而言之，是为余金于本所持六分之一也。以子减母，凡五关所税六分之五也。于今有术，所税一斤为所有数，分母六为所求率，分子五为所有率。此亦重今有之义。又虽各有率，不问中间，故令中率转相乘而连除之，即得也。置一以为持金之本率，以税率乘之、除之，则其率亦成积分也。〕

　　卷七

　　○盈不足（以御隐杂互见）

　　今有共买物，人出八，盈三；人出七，不足四。问人数、物价各几何？答曰：七人。物价五十三。

　　今有共买鸡，人出九，盈一十一；人出六，不足十六。问人数、鸡价各几何？答曰：九人。鸡价七十。

　　今有共买琎，人出半，盈四；人出少半，不足三。问人数、琎价各几何？答曰：四十二人。琎价十七。

　　〔注云“若两设有分者，齐其子，同其母”，此问两设俱见零分，故齐其子，同其母。又云“令下维乘上。讫，以同约之”，不可约，故以乘，同之。〕

　　今有共买牛，七家共出一百九十，不足三百三十；九家共出二百七十，盈三十。问家数、牛价各几何？答曰：一百二十六家。牛价三千七百五十。

　　〔按：此术并盈不足者，为众家之差，故以为实。置所出率，各以家数除之，各得一家所出率。以少减多者，得一家之差。以除，即家数。以出率乘之，减盈，故得牛价也。〕

　　术曰：置所出率，盈不足各居其下。令维乘所出率，并，以为实。并盈、不足，为法。实如法而一。

　　〔按：盈者，谓朓；不足者，谓之朒；所出率谓之假令。盈、朒维乘两设者，欲为同齐之意。据“共买物，人出八，盈三；人出七，不足四”，齐其假令，同其盈、朒，盈、朒俱十二。通计齐则不盈不朒之正数，故可并之为实，并盈、不足为法。齐之三十二者，是四假令，有盈十二；齐之二十一者，是三假令，亦朒十二；并七假令合为一实，故并三、四为法。〕

　　有分者通之。

　　〔若两设有分者，齐其子，同其母。令下维乘上，讫，以同约之。〕

　　盈不足相与同其买物者，置所出率，以少减多，余，以约法、实。实为物价，法为人数。

　　〔“所出率以少减多”者，余，谓之设差，以为少设。则并盈、朒，是为定实。故以少设约定实，则法，为人数；适足之实故为物价。盈朒当与少设相通。不可遍约，亦当分母乘，设差为约法、实。〕

　　其一术曰：并盈、不足为实。以所出率，以少减多，余为法。实如法得一人。

　　以所出率乘之，减盈、增不足，即物价。

　　〔此术意谓盈不足为众人之差。以所出率以少减多，余为一人之差。以一人之差约众人之差，故得人数也。〕

　　今有共买金，人出四百，盈三千四百；人出三百，盈一百。问人数、金价各几何？答曰：三十三人。金价九千八百。

　　今有共买羊，人出五，不足四十五；人出七，不足三。问人数、羊价各几何？答曰：二十一人。羊价一百五十。

　　术曰：置所出率，盈、不足各居其下。令维乘所出率，以少减多，余为实。

　　两盈、两不足以少减多，余为法。实如法而一。有分者，通之。两盈两不足相与同其买物者，置所出率，以少减多，余，以约法、实。实为物价，法为人数。

　　〔按：此术两不足者，两设皆不足于正数。其所以变化，犹两盈。而或有势同而情违者。当其为实，俱令不足维乘相减，则遗其所不足焉。故其余所以为实者，无朒数以损焉。盖出而有余，两盈。两设皆逾于正数。假令与共买物，人出八，盈三；人出九，盈十。齐其假令，同其两盈。两盈俱三十。举齐则兼去。

　　其余所以为实者，无盈数。两盈以少减多，余为法。齐之八十者，是十假令；而凡盈三十者，是十，以三之；齐之二十七者，是三假令；而凡盈三十者，是三，以十之。今假令两盈共十、三，以三减十，余七，为一实。故令以三减十，余七为法。所出率以少减多，余谓之设差。因设差为少设，则两盈之差是为定实。故以少设约法得人数，约实即得金数。〕

　　其一术曰：置所出率，以少减多，余为法。两盈、两不足以少减多，余为实。

　　实如法而一，得人数。以所出率乘之，减盈、增不足，即物价。

　　〔“置所出率，以少减多”，得一人之差。两盈、两不足相减，为众人之差。

　　故以一人之差除之，得人数。以所出率乘之，减盈、增不足，即物价。〕

　　今有共买犬，人出五，不足九十；人出五十，适足。问人数、犬价各几何？答曰：二人。犬价一百。

　　今有共买豕，人出一百，盈一百；人出九十，适足。问人数、豕价各几何？答曰：一十人。豕价九百。

　　术曰：以盈及不足之数为实。置所出率，以少减多，余为法。实如法得一人。

　　其求物价者，以适足乘人数，得物价。

　　〔此术意谓以所出率，以少减多者，余是一人不足之差。不足数为众人之差。

　　以一人差约之，故得人之数也。以盈及不足数为实者，数单见，即众人差，故以为实。所出率以少减多，即一人差，故以为法。以除众人差，得人数。以适足乘人数，即得物价也。〕

　　今有米在十斗桶中，不知其数。满中添粟而舂之，得米七斗。问故米几何？答曰：二斗五升。

　　术曰：以盈不足术求之。假令故米二斗，不足二升；令之三斗，有余二升。

　　〔按：桶受一斛，若使故米二斗，须添粟八斗以满之。八斗得粝米四斗八升，课于七斗，是为不足二升。若使故米三斗，须添粟七斗以满之。七斗得粝米四斗二升，课于七斗，是为有余二升。以盈不足维乘假令之数者，欲为齐同之意。为齐同者，齐其假令，同其盈朒。通计齐即不盈不朒之正数，故可以并之为实，并盈、不足为法。实如法，即得故米斗数，乃不盈不朒之正数也。〕

　　今有垣高九尺。瓜生其上，蔓日长七寸；瓠生其下，蔓日长一尺。问几何日相逢？瓜、瓠各长几何？答曰：五日十七分日之五。瓜长三尺七寸一十七分寸之一。瓠长五尺二寸一十七分寸之一十六。

　　术曰：假令五日，不足五寸；令之六日，有余一尺二寸。

　　〔按：“假令五日，不足五寸”者，瓜生五日，下垂蔓三尺五寸；瓠生五日，上延蔓五尺；课于九尺之垣，是为不足五寸。“令之六日，有余一尺二寸”者，若使瓜生六日，下垂蔓四尺二寸；瓠生六日，上延蔓六尺；课于九尺之垣，是为有余一尺二寸。以盈、不足维乘假令之数者，欲为齐同之意。齐其假令，同其盈朒。通计齐即不盈不朒之正数，故可并以为实，并盈、不足为法。实如法而一，即设差不盈不朒之正数，即得日数。以瓜、瓠一日之长乘之，故各得其长之数也。〕

　　今有蒲生一日，长三尺；莞生一日，长一尺。蒲生日自半，莞生日自倍。问几何日而长等？答曰：二日十三分日之六。各长四尺八寸一十三分寸之六。

　　术曰：假令二日，不足一尺五寸；令之三日，有余一尺七寸半。

　　〔按：“假令二日，不足一尺五寸”者，蒲生二日，长四尺五寸；莞生二日，长三尺；是为未相及一尺五寸，故曰不足。“令之三日，有余一尺七寸半”者，蒲增前七寸半，莞增前四尺，是为过一尺七寸半，故曰有余。以盈不足乘除之。

　　又以后一日所长各乘日分子，如日分母而一者，各得日分子之长也。故各增二日定长，即得其数。〕

　　今有醇酒一斗，直钱五十；行酒一斗，直钱一十。今将钱三十，得酒二斗。

　　问醇、行酒各得几何？答曰：醇酒二升半。行洒一斗七升半。

　　术曰：假令醇酒五升，行酒一斗五升，有余一十；令之醇酒二升，行酒一斗八升，不足二。

　　〔据醇酒五升，直钱二十五；行酒一斗五升，直钱一十五；课于三十，是为有余十。据醇酒二升，直钱一十；行酒一斗八升，直钱一十八；课于三十，是为不足二。以盈不足术求之。此问已有重设及其齐同之意也。〕

　　今有大器五，小器一，容三斛；大器一，小器五，容二斛。问大、小器各容几何？答曰：大器容二十四分斛之十三。小器容二十四分斛之七。

　　术曰：假令大器五斗，小器亦五斗，盈一十斗；令之大器五斗五升，小器二斗五升，不足二斗。

　　〔按：大器容五斗，大器五容二斛五斗。以减三斛，余五斗，即小器一所容。

　　故曰“小器亦五斗”。小器五容二斛五斗，大器一，合为三斛。课于两斛，乃多十斗。令之大器五斗五升，大器五合容二斛七斗五升。以减三斛，余二斗五升，即小器一所容。故曰小器二斗五升”。大器一容五斗五升，小器五合容一斛二斗五升，合为一斛八斗。课于二斛，少二斗。故曰“不足二斗”。以盈不足维乘，除之。〕

　　今有漆三得油四，油四和漆五。今有漆三斗，欲令分以易油，还自和余漆。

　　问出漆、得油、和漆各几何？答曰：出漆一斗一升四分升之一。得油一斗五升。

　　和漆一斗八升四分升之三。

　　术曰：假令出漆九升，不足六升；令之出漆一斗二升，有余二升。

　　〔按：此术三斗之漆，出九升，得油一斗二升，可和漆一斗五升，余有二斗一升，则六升无油可和，故曰“不足六升”。令之出漆一斗二升，则易得油一斗六升，可和漆二斗。于三斗之中已出一斗二升，余有一斗八升。见在油合和得漆二斗，则是有余二升。以盈、不足维乘之，为实。并盈、不足为法。实如法而一，得出漆升数。求油及和漆者，四、五各为所求率，三、四各为所有率，而今有之，即得也。〕

　　今有玉方一寸，重七两；石方一寸，重六两。今有石立方三寸，中有玉，并重十一斤。问玉、石重各几何？答曰：玉一十四寸，重六斤二两。石一十三寸，重四斤一十四两。

　　术曰：假令皆玉，多十三两；令之皆石，不足一十四两。不足为玉，多为石。

　　各以一寸之重乘之，得玉、石之积重。

　　〔立方三寸是一面之方，计积二十七寸。玉方一寸重七两，石方一寸重六两，是为玉、石重差一两。假令皆玉，合有一百八十九两。课于一十一斤，有余一十三两。玉重而石轻，故有此多。即二十七寸之中有十三寸，寸损一两，则以为石重，故言多为石。言多之数出于石以为玉。假令皆石，合有一百六十二两。课于十一斤，少十四两，故曰不足。此不足即以重为轻。故令减少数于并重，即二十七寸之中有十四寸，寸增一两也。〕

　　今有善田一亩，价三百；恶田七亩，价五百。今并买一顷，价钱一万。问善、恶田各几何？答曰：善田一十二亩半。恶田八十七亩半。

　　术曰：假令善田二十亩，恶田八十亩，多一千七百一十四钱七分钱之二；令之善田一十亩，恶田九十亩，不足五百七十一钱七分钱之三。

　　〔按：善田二十亩，直钱六千；恶田八十亩，直钱五千七百一十四、七分钱之二，课于一万，是多一千七百一十四、七分钱之二。令之善田十亩，直钱三千；恶田九十亩，直钱六千四百二十八、七分钱之四；课于一万，是为不足五百七十一、七分钱之三。以盈不足术求之也。〕

　　今有黄金九枚，白银一十一枚，称之重，适等。交易其一，金轻十三两。问金、银一枚各重几何？答曰：金重二斤三两一十八铢。银重一斤一十三两六铢。

　　术曰：假令黄金三斤，白银二斤一十一分斤之五，不足四十九，于右行。令之黄金二斤，白银一斤一十一分斤之七，多一十五，于左行。以分母各乘其行内之数。以盈、不足维乘所出率，并，以为实。并盈、不足为法。实如法，得黄金重。分母乘法以除，得银重。约之得分也。

　　〔按：此术假令黄金九，白银一十一，俱重二十七斤。金，九约之，得三斤；银，一十一约之，得二斤一十一分斤之五；各为金、银一枚重数。就金重二十七斤之中减一金之重，以益银，银重二十七斤之中减一银之重，以益金，则金重二十六斤一十一分斤之五，银重二十七斤一十一分斤之六。以少减多，则金轻一十七两一十一分两之五。课于一十三两，多四两一十一分两之五。通分内子言之，是为不足四十九。又令之黄金九，一枚重二斤，九枚重一十八斤；白银一十一，亦合重一十八斤也。乃以一十一除之，得一斤一十一分斤之七，为银一枚之重数。

　　今就金重一十八斤之中减一枚金，以益银；复减一枚银，以益金，则金重一十七斤一十一分斤之七，银重一十八斤一十一分斤之四。以少减多，即金轻一十一分斤之八。课于一十三两，少一两一十一分两之四。通分内子言之，是为多一十五。

　　以盈不足为之，如法，得金重。分母乘法以除者，为银两分母，故同之。须通法而后乃除，得银重。余皆约之者，术省故也。〕

　　今有良马与驽马发长安，至齐。齐去长安三千里。良马初日行一百九十三里，日增一十三里，驽马初日行九十七里，日减半里。良马先至齐，复还迎驽马。问几何日相逢及各行几何？答曰：一十五日一百九十一分日之一百三十五而相逢。

　　良马行四千五百三十四里一百九十一分里之四十六。驽马行一千四百六十五里一百九十一分里之一百四十五。

　　术曰：假令十五日，不足三百三十七里半；令之十六日，多一百四十里。以盈、不足维乘假令之数，并而为实。并盈、不足为法。实如法而一，得日数。不尽者，以等数除之而命分。求良马行者：十四乘益疾里数而半之，加良马初日之行里数，以乘十五日，得十五日之凡行。又以十五日乘益疾里数，加良马初日之行。以乘日分子，如日分母而一。所得，加前良马凡行里数，即得。其不尽而命分。求驽马行者：以十四乘半里，又半之，以减驽马初日之行里数，以乘十五日，得驽马十五日之凡行。又以十五日乘半里，以减驽马初日之行，余，以乘日分子，如日分母而一。所得，加前里，即驽马定行里数。其奇半里者，为半法。以半法增残分，即得。其不尽者而命分。

　　〔按：“令十五日，不足三百三十七里半”者，据良马十五日凡行四千二百六十里，除先去齐三千里，定还迎驽马一千二百六十里；驽马十五日凡行一千四百二里半，并良、驽二马所行，得二千六百六十二里半。课于三千里，少三百三十七里半。故曰不足。“令之十六日，多一百四十里”者，据良马十六日凡行四千六百四十八里；除先去齐三千里，定还迎驽马一千六百四十八里，驽马十六日凡行一千四百九十二里。并良、驽二马所行，得三千一百四十里。课于三千里，余有一百四十里。故谓之多也。以盈不足之，实如法而一，得日数者，即设差不盈不朒之正数。以二马初日所行里乘十五日，为一十五日平行数。求初末益疾减迟之数者，并一与十四，以十四乘而半之，为中平之积。又令益疾减迟里数乘之，各为减益之中平里。故各减益平行数，得一十五日定行里。若求后一日，以十六日之定行里数乘日分子，如日分母而一，各得日分子之定行里数。故各并十五日定行里，即得。其驽马奇半里者，法为全里之分，故破半里为半法，以增残分，即合所问也。〕

　　今有人持钱之蜀贾，利十，三。初返归一万四千，次返归一万三千，次返归一万二千，次返归一万一千，后返归一万。凡五返归钱，本利俱尽。问本持钱及利各几何？答曰：本三万四百六十八钱三十七万一千二百九十三分钱之八万四千八百七十六。利二万九千五百三十一钱三十七万一千二百九十三分钱之二十八万六千四百一十七。

　　术曰：假令本钱三万，不足一千七百三十八钱半；令之四万，多三万五千三百九十钱八分。

　　〔按：假令本钱三万，并利为三万九千；除初返归留，余，加利为三万二千五百；除二返归留，余，又加利为二万五千三百五十；除第三返归留，余，又加利为一万七千三百五十五；除第四返归留，余，又加利为八千二百六十一钱半；除第五返归留，合一万钱，不足一千七百三十八钱半。若使本钱四万，并利为五万二千；除初返归留，余，加利为四万九千四百；除第二返归留，余，又加利为四万七千三百二十；除第三返归留，余，又加利为四万五千九百一十六；除第四返归留，余，又加利为四万五千三百九十钱八分；除第五返归留，合一万，余三万五千三百九十钱八分，故曰多。

　　又术：置后返归一万，以十乘之，十三而一，即后所持之本。加一万一千，又以十乘之，十三而一，即第四返之本。加一万二千，又以十乘之，十三而一，即第三返之本。加一万三千，又以十乘之，十三而一，即第二返之本。加一万四千，又以十乘之，十三而一，即初持之本。并五返之钱以减之，即利也。〕

　　今有垣厚五尺，两鼠对穿。大鼠日一尺，小鼠亦日一尺。大鼠日自倍，小鼠日自半。问几何日相逢？各穿几何？答曰：二日一十七分日之二。大鼠穿三尺四寸十七分寸之一十二，小鼠穿一尺五寸十七分寸之五。

　　术曰：假令二日，不足五寸；令之三日，有余三尺七寸半。

　　〔大鼠日倍，二日合穿三尺；小鼠日自半，合穿一尺五寸；并大鼠所穿，合四尺五寸。课于垣厚五尺，是为不足五寸。令之三日，大鼠穿得七尺，小鼠穿得一尺七寸半。并之，以减垣厚五尺，有余三尺七寸半。以盈不足术求之，即得。

　　以后一日所穿乘日分子，如日分母而一，即各得日分子之中所穿。故各增二日定穿，即合所问也。〕

　　卷八

　　○方程（以御错糅正负）

　　今有上禾三秉，中禾二秉，下禾一秉，实三十九斗；上禾二秉，中禾三秉，下禾一秉，实三十四斗；上禾一秉，中禾二秉，下禾三秉，实二十六斗。问上、中、下禾实一秉各几何？答曰：上禾一秉九斗四分斗之一。中禾一秉四斗四分斗之一。下禾一秉二斗四分斗之三。

　　方程〔程，课程也。群物总杂，各列有数，总言其实。令每行为率。二物者再程，三物者三程，皆如物数程之。并列为行，故谓之方程。行之左右无所同存，且为有所据而言耳。此都术也，以空言难晓，故特系之禾以决之。又列中、左行如右行也。〕

　　术曰：置上禾三秉，中禾二秉，下禾一秉，实三十九斗于右方。中、左禾列如右方。以右行上禾遍乘中行，而以直除。

　　〔为术之意，令少行减多行，反复相减，则头位必先尽。上无一位，则此行亦阙一物矣。然而举率以相减，不害余数之课也。若消去头位，则下去一物之实。

　　如是叠令左右行相减，审其正负，则可得而知。先令右行上禾乘中行，为齐同之意。为齐同者，谓中行直减右行也。从简易虽不言齐同，以齐同之意观之，其义然矣。〕

　　又乘其次，亦以直除。

　　〔复去左行首。〕

　　然以中行中禾不尽者遍乘左行，而以直除。

　　〔亦令两行相去行之中禾也。〕

　　左方下禾不尽者，上为法，下为实。实即下禾之实。

　　〔上、中禾皆去，故余数是下禾实，非但一秉。欲约众秉之实，当以禾秉数为法。列此，以下禾之秉数乘两行，以直除，则下禾之位皆决矣。各以其余一位之秉除其下实。即计数矣用算繁而不省。所以别为法，约也。然犹不如自用其旧。

　　广异法也。〕

　　求中禾，以法乘中行下实，而除下禾之实。

　　〔此谓中两禾实，下禾一秉实数先见，将中秉求中禾，其列实以减下实。而左方下禾虽去一，以法为母，于率不通。故先以法乘，其通而同之。俱令法为母，而除下禾实。以下禾先见之实令乘下禾秉数，即得下禾一位之列实。减于下实，则其数是中禾之实也。〕

　　余，如中禾秉数而一，即中禾之实。

　　〔余，中禾一位之实也。故以一位秉数约之，乃得一秉之实也。〕

　　求上禾，亦以法乘右行下实，而除下禾、中禾之实。

　　〔此右行三禾共实，合三位之实。故以二位秉数约之，乃得一秉之实。今中下禾之实其数并见，令乘右行之禾秉以减之。故亦如前各求列实，以减下实也。〕

　　余，如上禾秉数而一，即上禾之实。实皆如法，各得一斗。

　　〔三实同用，不满法者，以法命之。母、实皆当约之。〕

　　今有上禾七秉，损实一斗，益之下禾二秉，而实一十斗；下禾八秉，益实一斗，与上禾二秉，而实一十斗。问上、下禾实一秉各几何？答曰：上禾一秉实一斗五十二分斗之一十八。下禾一秉实五十二分斗之四十一。

　　术曰：如方程。损之曰益，益之曰损。

　　〔问者之辞虽？今按：实云上禾七秉，下禾二秉，实一十一斗；上禾二秉，下禾八秉，实九斗也。“损之曰益”，言损一斗，余当一十斗；今欲全其实，当加所损也。“益之曰损”，言益实以一斗，乃满一十斗；今欲知本实，当减所加，即得也。〕

　　损实一斗者，其实过一十斗也；益实一斗者，其实不满一十斗也。

　　〔重谕损益数者，各以损益之数损益之也。〕

　　今有上禾二秉，中禾三秉，下禾四秉，实皆不满斗。上取中、中取下、下取上各一秉而实满斗。问上、中、下禾实一秉各几何？答曰上禾一秉实二十五分斗之九。中禾一秉实二十五分斗之七。下禾一秉实二十五分斗之四。

　　术曰：如方程。各置所取。

　　〔置上禾二秉为右行之上，中禾三秉为中行之中，下禾四秉为左行之下，所取一秉及实一斗各从其位。诸行相借取之物皆依此例。〕

　　以正负术入之。

　　正负术曰：〔今两算得失相反，要令正负以名之。正算赤，负算黑，否则以邪正为异。

　　方程自有赤、黑相取，法、实数相推求之术。而其并减之势不得广通，故使赤、黑相消夺之，于算或减或益。同行异位殊为二品，各有并、减之差见于下焉。著此二条，特系之禾以成此二条之意。故赤、黑相杂足以定上下之程，减、益虽殊足以通左右之数，差、实虽分足以应同异之率。然则其正无入以负之，负无入以正之，其率不妄也。〕

　　同名相除，〔此谓以赤除赤，以黑除黑，行求相减者，为去头位也。然则头位同名者，当用此条，头位异名者，当用下条。〕

　　异名相益，〔益行减行，当各以其类矣。其异名者，非其类也。非其类者，犹无对也，非所得减也。故赤用黑对则除，黑；无对则除，黑；黑用赤对则除，赤；无对则除，赤；赤黑并于本数。此为相益之，皆所以为消夺。消夺之与减益成一实也。

　　术本取要，必除行首。至于他位，不嫌多少，故或令相减，或令相并，理无同异而一也。〕

　　正无入负之，负无入正之。

　　〔无入，为无对也。无所得减，则使消夺者居位也。其当以列实或减下实，而行中正负杂者亦用此条。此条者，同名减实，异名益实，正无入负之，负无入正之也。〕

　　其异名相除，同名相益，正无入正之，负无入负之。

　　〔此条异名相除为例，故亦与上条互取。凡正负所以记其同异，使二品互相取而已矣。言负者未必负于少，言正者未必正于多。故每一行之中虽复赤黑异算无伤。然则可得使头位常相与异名。此条之实兼通矣，遂以二条反覆一率。观其每与上下互相取位，则随算而言耳，犹一术也。又，本设诸行，欲因成数以相去耳。故其多少无限，令上下相命而已。若以正负相减，如数有旧增法者，每行可均之，不但数物左右之也。〕

　　今有上禾五秉，损实一斗一升，当下禾七秉；上禾七秉，损实二斗五升，当下禾五秉。问上、下禾实一秉各几何？答曰：上禾一秉五升。下禾一秉二升。

　　术曰：如方程。置上禾五秉正，下禾七秉负，损实一斗一升正。

　　〔言上禾五秉之实多，减其一斗一升，余，是与下禾七秉相当数也。故互其算，令相折除，以一斗一升为差。为差者，上禾之余实也。〕

　　次置上禾七秉正，下禾五秉负，损实二斗五升正。以正负术入之。

　　〔按：正负之术，本设列行，物程之数不限多少，必令与实上下相次，而以每行各自为率。然而或减或益，同行异位，殊为二品，各自并、减，之差见于下也。〕

　　今有上禾六秉，损实一斗八升，当下禾一十秉；下禾一十五秉，损实五升，当上禾五秉。问上、下禾实一秉各几何？答曰：上禾一秉实八升。下禾一秉实三升。

　　术曰：如方程。置上禾六秉正，下禾一十秉负，损实一斗八升正。次，上禾五秉负，下禾一十五秉正，损实五升正。以正负术入之。

　　〔言上禾六秉之实多，减损其一斗八升，余是与下禾十秉相当之数。故亦互其算，而以一斗八升为差实。差实者，上禾之余实。〕

　　今有上禾三秉，益实六斗，当下禾一十秉；下禾五秉，益实一斗，当上禾二秉。问上、下禾实一秉各几何？答曰：上禾一秉实八斗。下禾一秉实三斗。

　　术曰：如方程。置上禾三秉正，下禾一十秉负，益实六斗负。次置上禾二秉负，下禾五秉正，益实一斗负。以正负术入之。

　　〔言上禾三秉之实少，益其六斗，然后于下禾十秉相当也。故亦互其算，而以六斗为差实。差实者，下禾之余实。〕

　　今有牛五，羊二，直金十两；牛二，羊五，直金八两。问牛、羊各直金几何？答曰：牛一直金一两二十一分两之一十三。羊一直金二十一分两之二十。

　　术曰：如方程。

　　〔假令为同齐，头位为牛，当相乘。右行定，更置牛十，羊四，直金二十两；左行：牛十，羊二十五，直金四十两。牛数等同，金多二十两者，羊差二十一使之然也。以少行减多行，则牛数尽，惟羊与直金之数见，可得而知也。以小推大，虽四五行不异也。〕

　　今有卖牛二，羊五，以买一十三豕，有余钱一千；卖牛三，豕三，以买九羊，钱适足；卖六羊，八豕，以买五牛，钱不足六百。问牛、羊、豕价各几何？答曰牛价一千二百。羊价五百。豕价三百。

　　术曰：如方程。置牛二，羊五正，豕一十三负，余钱数正；次，牛三正，羊九负，豕三正；次五牛负，六羊正，八豕正，不足钱负。以正负术入之。

　　〔此中行买、卖相折，钱适足，故但互买卖算而已。故下无钱直也。设欲以此行如方程法，先令二牛遍乘中行，而以右行直除之。是故终于下实虚缺矣。故注曰正无实负，负无实正，方为类也。方将以别实加适足之数与实物作实。

　　盈不足章“黄金白银”与此相当。“假令黄金九，白银一十一，称之重适等。

　　交易其一，金轻十三两。问金、银一枚各重几何？”与此同。〕

　　今有五雀六燕，集称之衡，雀俱重，燕俱轻。一雀一燕交而处，衡适平。并雀、燕重一斤。问雀、燕一枚各重几何？答曰：雀重一两一十九分两之一十三。

　　燕重一两一十九分两之五。

　　术曰：如方程。交易质之，各重八两。

　　〔此四雀一燕与一雀五燕衡适平，并重一斤，故各八两。列两行程数。左行头位其数有一者，令右行遍除。亦可令于左行而取其法、实于左。左行数多，以右行取其数。左头位减尽，中、下位算当燕与实。右行不动。左上空，中法，下实，即每枚当重宜可知也。按：此四雀一燕与一雀五燕其重等，是三雀、四燕重相当。雀率重四，燕率重三也。诸再程之率皆可异术求也，即其数也。〕

　　今有甲、乙二人持钱不知其数。甲得乙半而钱五十，乙得甲太半而亦钱五十。

　　问甲、乙持钱各几何？答曰：甲持三十七钱半。乙持二十五钱。

　　术曰：如方程。损益之。

　　〔此问者言一甲，半乙而五十；太半甲，一乙亦五十也。各以分母乘其全，内子。行定：二甲，一乙而钱一百；二甲，三乙而钱一百五十。于是乃如方程。

　　诸物有分者放此。〕

　　今有二马，一牛，价过一万，如半马之价；一马，二牛，价不满一万，如半牛之价。问牛、马价各几何？答曰：马价五千四百五十四钱一十一分钱之六。牛价一千八百一十八钱一十一分钱之二。

　　术曰：如方程。损益之。

　　〔此一马半与一牛价直一万也，二牛半与一马亦直一万也。一马半与一牛直钱一万，通分内子，右行为三马，二牛，直钱二万。二牛半与一马直钱一万，通分内子，左行为二马，五牛，直钱二万也。〕

　　今有武马一匹，中马二匹，下马三匹，皆载四十石至阪，皆不能上。武马借中马一匹，中马借下马一匹，下马借武马一匹，乃皆上。问武、中、下马一匹各力引几何？答曰：武马一匹力引二十二石七分石之六。中马一匹力引一十七石七分石之一。下马一匹力引五石七分石之五。

　　术曰：如方程。各置所借，以正负术入之。

　　今有五家共井，甲二绠不足，如乙一绠。乙三绠不足，以丙一绠；丙四绠不足，以丁一绠；丁五绠不足，以戊一绠；戊六绠不足，以甲一绠。如各得所不足一绠，皆逮。问井深、绠长各几何？答曰：井深七丈二尺一寸。甲绠长二丈六尺五寸。乙绠长一丈九尺一寸。丙绠长一丈四尺八寸。丁绠长一丈二尺九寸。戊绠长七尺六寸。

　　术曰：如方程。以正负术入之。

　　〔此率初如方程为之，名各一逮井。其后，法得七百二十一，实七十六，是为七百二十一绠而七十六逮井，并用逮之数。以法除实者，而戊一绠逮井之数定，逮七百二十一分之七十六。是故七百二十一为井深，七十六为戊绠之长，举率以言之。〕

　　今有白禾二步，青禾三步，黄禾四步，黑禾五步，实各不满斗。白取青、黄，青取黄、黑，黄取黑、白，黑取白、青，各一步，而实满斗。问白、青、黄、黑禾实一步各几何？答曰：白禾一步实一百一十一分斗之三十三。青禾一步实一百一十一分斗之二十八。黄禾一步实一百一十一分斗之一十七。黑禾一步实一百一十一分斗之一十。

　　术曰：如方程。各置所取，以正负术入之。

　　今有甲禾二秉，乙禾三秉，丙禾四秉，重皆过于石。甲二重如乙一，乙三重如丙一，丙四重如甲一。问甲、乙、丙禾一秉各重几何？答曰：甲禾一秉重二十三分石之一十七。乙禾一秉重二十三分石之一十一。丙禾一秉重二十三分石之一十。

　　术曰：如方程。置重过于石之物为负。

　　〔此问者言甲禾二秉之重过于一石也。其过者何云？如乙一秉重矣。互其算，令相折除，而一以石为之差实。差实者，如甲禾余实。故置算相与同也。〕

　　以正负术入之。

　　〔此入，头位异名相除者，正无入正之，负无入负之也。〕

　　今有令一人，吏五人，从者一十人，食鸡一十；令一十人，吏一人，从者五人，食鸡八；令五人，吏一十人，从者一人，食鸡六。问令、吏、从者食鸡各几何？答曰令一人食一百二十二分鸡之四十五。吏一人食一百二十二分鸡之四十一。

　　从者一人食一百二十二分鸡之九十七。

　　术曰：如方程。以正负术入之。

　　今有五羊，四犬，三鸡，二兔，直钱一千四百九十六；四羊，二犬，六鸡，三兔，直钱一千一百七十五；三羊，一犬，七鸡，五兔，直钱九百五十八；二羊，三犬，五鸡，一兔，直钱八百六十一。问羊、犬、鸡、兔价各几何？答曰：羊价一百七十七。犬价一百二十一。鸡价二十三。兔价二十九。

　　术曰：如方程。以正负术入之。

　　今有麻九斗，麦七斗，菽三斗，荅二斗，黍五斗，直钱一百四十；麻七斗，麦六斗，菽四斗，荅五斗，黍三斗，直钱一百二十八；麻三斗，麦五斗，菽七斗，荅六斗，黍四斗，直钱一百一十六；麻二斗，麦五斗，菽三斗，荅九斗，黍四斗，直钱一百一十二；麻一斗，麦三斗，菽二斗，荅八斗，黍五斗，直钱九十五。问一斗直几何？荅曰：麻一斗七钱。麦一斗四钱。菽一斗三钱。荅一斗五钱。黍一斗六钱。

　　术曰：如方程。以正负术入之。

　　〔此麻麦与均输、少广之章重衰、积分皆为大事。其拙于精理徒按本术者，或用算而布毡，方好烦而喜误，曾不知其非，反欲以多为贵。故其算也，莫不暗于设通而专于一端。至于此类，苟务其成，然或失之，不可谓要约。更有异术者庖丁解牛，游刃理间，故能历久其刃如新。夫数，犹刃也，易简用之则动中庖丁之理。故能和神爱刃，速而寡尤。凡九章为大事，按法皆不尽一百算也。虽布算不多，然足以算多。世人多以方程为难，或尽布算之象在缀正负而已，未暇以论其设动无方，斯胶柱调瑟之类。聊复恢演，为作新术，著之于此，将亦启导疑意。网罗道精，岂传之空言？记其施用之例，著策之数，每举一隅焉。

　　方程新术曰：以正负术入之。令左、右相减，先去下实，又转去物位，则其求一行二物正负相借者，是其相当之率。又令二物与他行互相去取，转其二物相借之数，即皆相当之率也。各据二物相当之率，对易其数，即各当之率也。更置成行及其下实，各以其物本率今有之，求其所同。并，以为法。其当相并而行中正负杂者，同名相从，异名相消，余，以为法。以下置为实。实如法，即合所问也。一物各以本率今有之，即皆合所问也。率不通者，齐之。

　　其一术曰：置群物通率为列衰。更置成行群物之数，各以其率乘之，并，以为法。其当相并而行中正负杂者，同名相从，异名相消，余为法。以成行下实乘列衰，各自为实。实如法而一，即得。

　　以旧术为之。凡应置五行。今欲要约，先置第三行，减以第四行，又减第五行；次置第二行，以第二行减第一行，又减第四行。去其头位；余，可半；次置右行及第二行。去其头位；次以右行去第四行头位，次以左行去第二行头位，次以第五行去第一行头位；次以第二行去第四行头位；余，可半；以右行去第二行头位，以第二行去第四行头位。余，约之为法、实。实如法而一，得六，即有黍价。以法治第二行，得荅价，右行得菽价，左行得麦价，第三行麻价。如此凡用七十七算。

　　以新术为此。先以第四行减第三行；次以第三行去右行及第二行、第四行下位，又以减左行下位，不足减乃止；次以左行减第三行下位，次以第三行去左行下位。讫，废去第三行。次以第四行去左行下位，又以减右行下位；次以右行去第二行及第四行下位；次以第二行减第四行及左行头位；次以第四行减左行菽位，不足减乃止；次以左行减第二行头位，余，可再半；次以第四行去左行及第二行头位，次以第二行去左行头位，余，约之，上得五，下得三，是菽五当荅；次以左行去第二行菽位，又以减第四行及右行菽位，不足减乃止；次以右行减第二行头位，不足减乃止；次以第二行去右行头位，次以左行去右行头位；余，上得六，下得五，是为荅六当黍五；次以左行去右行荅位，余，约之，上为二，下为一；次以右行去第二行下位，以第二行去第四行下位，又以减左行下位；次，左行去第二行下位，余，上得三，下得四，是为麦三当菽四；次以第二行减第四行下位；次以第四行去第二行下位；余，上得四，下得七，是为麻四当麦七。是为相当之率举矣。据麻四当麦七，即麻价率七而麦价率四；又麦三当菽四，即为麦价率四而菽价率三；又菽五当荅三，即为菽价率三而荅价率五；又荅六当黍五，即为荅价率五而黍价率六；而率通矣。更置第三行，以第四行减之，余有麻一斗，菽四斗正，荅三斗负，下实四正。求其同为麻之数，以菽率三、荅率五各乘其斗数，如麻率七而一，菽得一斗七分斗之五正，荅得二斗七分斗之一负。则菽、荅化为麻。以并之，令同名相从，异名相消，余得定麻七分斗之四，以为法。置四为实，而分母乘之，实得二十八，而分子化为法矣以法除得七，即麻一斗之价。置麦率四、菽率三、荅率五、黍率六，皆以麻乘之，各自为实。以麻率七为法。所得即各为价。亦可使置本行实与物同通之，各以本率今有之，求其本率所得。并，以为法。如此，即无正负之异矣，择异同而已。又可以一术为之。置五行通率，为麻七、麦四、菽三、荅五、黍六，以为列衰。成行麻一斗，菽四斗正，荅三斗负，各以其率乘之。讫，令同名相从，异名相消，余为法。又置下实乘列衰，所得各为实。此可以置约法，则不复乘列衰，各以列衰为价。如此则凡用一百二十四算也。〕

　　卷九

　　○句股（以御高深广远）

　　今有句三尺，股四尺，问为弦几何？答曰：五尺。

　　今有弦五尺，句三尺，问为股几何？答曰：四尺。

　　今有股四尺，弦五尺，问为句几何？答曰：三尺。

　　句股〔短面曰句，长面曰股，相与结角曰弦。句短其股，股短其弦。将以施于诸率，故先具此术以见其源也。〕

　　术曰：句、股各自乘，并，而开方除之，即弦。

　　〔句自乘为朱方，股自乘为青方。令出入相补，各从其类，因就其余不移动也，合成弦方之幂。开方除之，即弦也。〕

　　又，股自乘，以减弦自乘。其余，开方除之，即句。

　　〔淳风等按：此术以句、股幂合成弦幂。句方于内，则句短于股。令股自乘，以减弦自乘，余者即句幂也。故开方除之，即句也。〕

　　又，句自乘，以减弦自乘。其余，开方除之，即股。

　　〔句、股幂合以成弦幂，令去其一，则余在者皆可得而知之。〕

　　今有圆材，径二尺五寸。欲为方版，令厚七寸，问广几何？答曰：二尺四寸。

　　术曰：令径二尺五寸自乘，以七寸自乘，减之。其余，开方除之，即广。

　　〔此以圆径二尺五寸为弦，版厚七寸为句，所求广为股也。〕

　　今有木长二丈，围之三尺。葛生其下，缠木七周，上与木齐。问葛长几何？答曰：二丈九尺。

　　术曰：以七周乘围为股，木长为句，为之求弦。弦者，葛之长。

　　〔据围广，求从为木长者其形葛卷裹袤。以笔管，青线宛转，有似葛之缠木。

　　解而观之，则每周之间自有相间成句股弦。则其间葛长，弦。七周乘围，并合众句以为一句；木长而股，短；术云木长谓之股，言之倒。句与股求弦，亦无围。弦之自乘幂出上第一图。句、股幂合为弦幂，明矣。然二幂之数谓倒在于弦幂之中而已。可更相表里，居里者则成方幂，其居表者则成矩幂。二表里形讹而数均。又按：此图句幂之矩青，卷白表，是其幂以股弦差为广，股弦并为袤，而股幂方其里。股幂之矩青，卷白表，是其幂以句弦差为广，句弦并为袤，而句幂方其里。是故差之与并用除之，短、长互相乘也。〕

　　今有池方一丈，葭生其中央，出水一尺。引葭赴岸，适与岸齐。问水深、葭长各几何？答曰：水深一丈二尺。葭长一丈三尺。

　　术曰：半池方自乘，〔此以池方半之，得五尺为句；水深为股；葭长为弦。以句、弦见股，故令句自乘，先见矩幂也。〕

　　以出水一尺自乘，减之。

　　〔出水者，股弦差。减此差幂于矩幂则除之。〕

　　余，倍出水除之，即得水深。

　　〔差为矩幂之广，水深是股。令此幂得出水一尺为长，故为矩而得葭长也。〕

　　加出水数，得葭长。

　　〔淳风等按：此葭本出水一尺，既见水深，故加出水尺数而得葭长也。〕

　　今有立木，系索其末，委地三尺。引索却行，去本八尺而索尽。问索长几何？答曰：一丈二尺六分尺之一。

　　术曰：以去本自乘，〔此以去本八尺为句，所求索者，弦也。引而索尽、开门去阃者，句及股弦差，同一术。去本自乘者，先张矩幂。〕

　　令如委数而一。

　　〔委地者，股弦差也。以除矩幂，即是股弦并也。〕

　　所得，加委地数而半之，即索长。

　　〔子不可半者，倍其母。加差者并，则两长。故又半之。其减差者并，而半之，得木长也。〕

　　今有垣高一丈，倚木于垣，上与垣齐。引木却行一尺，其木至地。问木长几何？答曰：五丈五寸。

　　术曰：以垣高一十尺自乘，如却行尺数而一。所得，以加却行尺数而半之，即木长数。

　　〔此以垣高一丈为句，所求倚木者为弦，引却行一尺为股弦差。为术之意与系索问同也。〕

　　今有圆材埋在壁中，不知大小。以锯锯之，深一寸，锯道长一尺。问径几何？答曰：材径二尺六寸。

　　术曰：半锯道自乘，〔此术以锯道一尺为句，材径为弦，锯深一寸为股弦差之一半。锯道长是半也。

　　淳风等按：下锯深得一寸为半股弦差。注云为股差差者，锯道也。〕

　　如深寸而一，以深寸增之，即材径。

　　〔亦以半增之。如上术，本当半之，今此皆同半，故不复半也。〕

　　今有开门去阃一尺，不合二寸。问门广几何？答曰：一丈一寸。

　　术曰：以去阃一尺自乘。所得，以不合二寸半之而一。所得，增不合之半，即得门广。

　　〔此去阃一尺为句，半门广为弦，不合二寸以半之，得一寸为股弦差。求弦，故当半之。今次以两弦为广数，故不复半之也。〕

　　今有户高多于广六尺八寸，两隅相去适一丈。问户高、广各几何？答曰：广二尺八寸。高九尺六寸。

　　术曰：令一丈自乘为实。半相多，令自乘，倍之，减实。半其余，以开方除之。所得，减相多之半，即户广；加相多之半，即户高。

　　〔令户广为句，高为股，两隅相去一丈为弦，高多于广六尺八寸为句股差。按图为位，弦幂适满万寸。倍之，减句股差幂，开方除之。其所得即高广并数。以差减并而半之，即户广。加相多之数，即户高也。今此术先求其半。一丈自乘为朱幂四、黄幂一。半差自乘，又倍之，为黄幂四分之二，减实，半其余，有朱幂二、黄幂四分之一。其于大方者四分之一。故开方除之，得高广并数半。减差半，得广；加，得户高。又按：此图幂：句股相并幂而加其差幂，亦减弦幂，为积。盖先见其弦，然后知其句与股。今适等，自乘，亦各为方，合为弦幂。令半相多而自乘，倍之，又半并自乘，倍之，亦合为弦幂。而差数无者，此各自乘之，而与相乘数，各为门实。及股长句短，同源而分流焉。假令句、股各五，弦幂五十，开方除之，得七尺，有余一，不尽。假令弦十，其幂有百，半之为句、股二幂，各得五十，当亦不可开。故曰：圆三、径一，方五、斜七，虽不正得尽理，亦可言相近耳。其句股合而自相乘之幂者，令弦自乘，倍之，为两弦幂，以减之，其余，开方除之，为句股差。加于合而半，为股；减差于合而半之，为句。句、股、弦即高、广、邪。其出此图也，其倍弦为袤。令矩句即为幂，得广即句股差。其矩句之幂，倍句为从法，开之亦句股差。以句股差幂减弦幂，半其余，差为从法，开方除之，即句也。〕

　　今有竹高一丈，末折抵地，去本三尺。问折者高几何？答曰：四尺二十分尺之一十一。

　　术曰：以去本自乘，〔此去本三尺为句，折之余高为股，以先令句自乘之幂。〕

　　令如高而一。

　　〔凡为高一丈为股弦并，以除此幂得差。〕

　　所得，以减竹高而半余，即折者之高也。

　　〔此术与系索之类更相反覆也。亦可如上术，令高自乘为股弦并幂，去本自乘为矩幂，减之，余为实。倍高为法，则得折之高数也。〕

　　今有二人同所立，甲行率七，乙行率三。乙东行，甲南行十步而斜东北与乙会。问甲、乙行各几何？答曰：乙东行一十步半，甲斜行一十四步半及之。

　　术曰：令七自乘，三亦自乘，并而半之，以为甲斜行率。斜行率减于七自乘，余为南行率。以三乘七为乙东行率。

　　〔此以南行为句，东行为股，斜行为弦，并句弦率七。欲引者，当以股率自乘为幂，如并而一，所得为句弦差率。加并之半为弦率，以差率减，余为句率。如是或有分，当通而约之乃定。术以同使无分母，故令句弦并自乘为朱、黄相连之方。股自乘为青幂之矩，以句弦并为袤，差为广。今有相引之直，加损同上。其图大体以两弦为袤，句弦并为广。引黄断其半为弦率。列用率七自乘者，句弦并之率。故弦减之，余为句率。同立处是中停也，皆句弦并为率，故亦以句率同其袤也。〕

　　置南行十步，以甲斜行率乘之；副置十步，以乙东行率乘之；各自为实。实如南行率而一，各得行数。

　　〔南行十步者，所有见句求见弦、股，故以弦、股率乘，如句率而一。〕

　　今有句五步，股十二步。问句中容方几何？答曰：方三步十七分步之九。

　　术曰：并句、股为法，句、股相乘为实。实如法而一，得方一步。

　　〔句、股相乘为朱、青、黄幂各二。令黄幂袤于隅中，朱、青各以其类，令从其两径，共成修之幂：中方黄为广，并句、股为袤。故并句、股为法。幂图：方在句中，则方之两廉各自成小句股，而其相与之势不失本率也。句面之小句、股，股面之小句、股各并为中率，令股为中率，并句、股为率，据见句五步而今有之，得中方也。复令句为中率，以并句、股为率，据见股十二步而今有之，则中方又可知。此则虽不效而法，实有法由生矣。下容圆率而似今有、衰分言之，可以见之也。〕

　　今有句八步，股一十五步。问句中容圆径几何？答曰：六步。

　　术曰：八步为句，十五步为股，为之求弦。三位并之为法。以句乘股，倍之为实。实如法，得径一步。

　　〔句、股相乘为图本体，朱、青、黄幂各二。倍之，则为各四。可用画于小纸，分裁邪正之会，令颠倒相补，各以类合，成修幂：圆径为广，并句、股、弦为袤。故并句、股、弦以为法。又以圆大体言之，股中青必令立规于横广，句、股又邪三径均。而复连规，从横量度句、股，必合而成小方矣。又画中弦以规除会，则句、股之面中央小句股弦：句之小股、股之小句皆小方之面，皆圆径之半。其数故可衰。以句、股、弦为列衰，副并为法。以句乘未并者，各自为实。实如法而一，得句面之小股可知也。以股乘列衰为实，则得股面之小句可知。言虽异矣，及其所以成法之实，则同归矣。则圆径又可以表之差并：句弦差减股为圆径；又，弦减句股并，余为圆径；以句弦差乘股弦差而倍之，开方除之，亦圆径也。〕

　　今有邑方二百步，各中开门。出东门一十五步有木。问出南门几何步而见木？答曰：六百六十六步大半步。

　　术曰：出东门步数为法，〔以句率为法也。〕

　　半邑方自乘为实，实如法得一步。

　　〔此以出东门十五步为句率，东门南至隅一百步为股率，南门东至隅一百步为见句步。欲以见句求股，以为出南门数。正合半邑方自乘者，股率当乘见句，此二者数同也。〕

　　今有邑东西七里，南北九里，各中开门。出东门一十五里有木。问出南门几何步而见木？答曰：三百一十五步。

　　术曰：东门南至隅步数，以乘南门东至隅步数为实。以木去门步数为法。实如法而一。

　　〔此以东门南至隅四里半为句率，出东门一十五里为股率，南门东至隅三里半为见股。所问出南门即见股之句。为术之意，与上同也。〕

　　今有邑方不知大小，各中开门。出北门三十步有木，出西门七百五十步见木。

　　问邑方几何？答曰：一里。

　　术曰：令两出门步数相乘，因而四之，为实。开方除之，即得邑方。

　　〔按：半邑方，令半方自乘，出门除之，即步。令二出门相乘，故为半方邑自乘，居一隅之积分。因而四之，即得四隅之积分。故为实，开方除，即邑方也。〕

　　今有邑方不知大小，各中开门。出北门二十步有木，出南门一十四步，折而西行一千七百七十五步见木。问邑方几何？答曰：二百五十步。

　　术曰：以出北门步数乘西行步数，倍之，为实。

　　〔此以折而西行为股，自木至邑南一十四步为句，以出北门二十步为句率，北门至西隅为股率，半广数。故以出北门乘折西行股，以股率乘句之幂。然此幂居半，以西行。故又倍之，合东，尽之也。〕

　　并出南、北门步数，为从法，开方除之，即邑方。

　　〔此术之幂，东西如邑方，南北自木尽邑南十四步之幂，各南北步为广，邑方为袤，故连两广为从法，并，以为隅外之幂也。〕

　　今有邑方一十里，各中开门。甲、乙俱从邑中央而出：乙东出；甲南出，出门不知步数，邪向东北，磨邑隅，适与乙会。率：甲行五，乙行三。问甲、乙行各几何？答曰：甲出南门八百步，邪东北行四千八百八十七步半，及乙。乙东行四千三百一十二步半。

　　术曰：令五自乘，三亦自乘，并而半之，为邪行率；邪行率减于五自乘者，余为南行率；以三乘五为乙东行率。

　　〔求三率之意与上甲乙同。〕

　　置邑方，半之，以南行率乘之，如东行率而一，即得出南门步数。

　　〔今半方，南门东至隅五里。半邑者，谓为小股也。求以为出南门步数。故置邑方，半之，以南行句率乘之，如股率而一。〕

　　以增邑方半，即南行。

　　〔半邑者，谓从邑心中停也。〕

　　置南行步，求弦者，以邪行率乘之；求东行者，以东行率乘之，各自为实。

　　实如法，南行率，得一步。

　　〔此术与上甲乙同。〕

　　今有木去人不知远近。立四表，相去各一丈，令左两表与所望参相直。从后右表望之，入前右表三寸。问木去人几何？答曰：三十三丈三尺三寸少半寸。

　　术曰：令一丈自乘为实，以三寸为法，实如法而一。

　　〔此以入前右表三寸为句率，右两表相去一丈为股率，左右两表相去一丈为见句。所问木去人者，见句之股。股率当乘见句，此二率俱一丈，故曰自乘之。

　　以三寸为法。实如法得一寸。〕

　　今有山居木西，不知其高。山去木五十三里，木高九丈五尺。人立木东三里，望木末适与山峰斜平。人目高七尺。问山高几何？答曰：一百六十四丈九尺六寸太半寸。

　　术曰：置木高，减人目高七尺，〔此以木高减人目高七尺，余有八丈八尺，为句率；去人目三里为股率；山去木五十三里为见股，以求句。加木之高，故为山高也。〕

　　余，以乘五十三里为实。以人去木三里为法。实如法而一。所得，加木高，即山高。

　　〔此术句股之义。〕

　　今有井，径五尺，不知其深。立五尺木于井上，从木末望水岸，入径四寸。

　　问井深几何？答曰：五丈七尺五寸。

　　术曰：置井径五尺，以入径四寸减之，余，以乘立木五尺为实。以入径四寸为法。实如法得一寸。

　　〔此以入径四寸为句率，立木五尺为股率，井径之余四尺六寸为见句。问井深者，见句之股也。〕

　　今有户不知高、广，竿不知长短。横之不出四尺，从之不出二尺，邪之适出。

　　问户高、广、邪各几何？答曰：广六尺。高八尺。邪一丈。

　　术曰：从、横不出相乘，倍，而开方除之。所得，加从不出，即户广；〔此以户广为句，户高为股，户邪为弦。凡句之在股，或矩于表，或方于里。

　　连之者举表矩而端之。又从句方里令为青矩之表，未满黄方。满此方则两端之邪重于隅中，各以股弦差为广，句弦差为袤。故两端差相乘，又倍之，则成黄方之幂。开方除之，得黄方之面。其外之青知，亦以股弦差为广。故以股弦差加，则为句也。〕

　　加横不出，即户高；两不出加之，得户邪。

　　
